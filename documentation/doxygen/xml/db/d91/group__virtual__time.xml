<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.13">
  <compounddef id="db/d91/group__virtual__time" kind="group">
    <compoundname>virtual_time</compoundname>
    <title>Virtual Time Scheduling</title>
      <sectiondef kind="var">
      <memberdef kind="variable" id="db/d91/group__virtual__time_1ga01668987c0c99e1845cffb8bc2f21507" prot="public" static="no" mutable="no">
        <type>fc::uint128</type>
        <definition>fc::uint128 steemit::chain::witness_object::virtual_last_update</definition>
        <argsstring></argsstring>
        <name>virtual_last_update</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="libraries/chain/include/steemit/chain/witness_objects.hpp" line="104" column="1" bodyfile="libraries/chain/include/steemit/chain/witness_objects.hpp" bodystart="104" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="db/d91/group__virtual__time_1ga64da286fee2b7aa43606b187b251863c" prot="public" static="no" mutable="no">
        <type>fc::uint128</type>
        <definition>fc::uint128 steemit::chain::witness_object::virtual_position</definition>
        <argsstring></argsstring>
        <name>virtual_position</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="libraries/chain/include/steemit/chain/witness_objects.hpp" line="105" column="1" bodyfile="libraries/chain/include/steemit/chain/witness_objects.hpp" bodystart="105" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="db/d91/group__virtual__time_1gaea609b3a5f9bd04d947af0b477af737b" prot="public" static="no" mutable="no">
        <type>fc::uint128</type>
        <definition>fc::uint128 steemit::chain::witness_object::virtual_scheduled_time</definition>
        <argsstring></argsstring>
        <name>virtual_scheduled_time</name>
        <initializer>= fc::uint128::max_value()</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="libraries/chain/include/steemit/chain/witness_objects.hpp" line="106" column="1" bodyfile="libraries/chain/include/steemit/chain/witness_objects.hpp" bodystart="106" bodyend="-1"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
<para>How the witness was scheduled the last time it was scheduled. </para>    </briefdescription>
    <detaileddescription>
<para>These fields are used for the witness scheduling algorithm which uses virtual time to ensure that all witnesses are given proportional time for producing blocks.</para><para><ref refid="df/d1f/classsteemit_1_1chain_1_1witness__object_1ac494496c0b0132813ea8f1c0b76104e8" kindref="member">votes</ref> is used to determine speed. The <ref refid="db/d91/group__virtual__time_1gaea609b3a5f9bd04d947af0b477af737b" kindref="member">virtual_scheduled_time</ref> is the expected time at which this witness should complete a virtual lap which is defined as the position equal to 1000 times MAXVOTES.</para><para>virtual_scheduled_time = virtual_last_update + (1000*MAXVOTES - virtual_position) / votes</para><para>Every time the number of votes changes the virtual_position and virtual_scheduled_time must update. There is a global current virtual_scheduled_time which gets updated every time a witness is scheduled. To update the virtual_position the following math is performed.</para><para>virtual_position = virtual_position + votes * (virtual_current_time - virtual_last_update) virtual_last_update = virtual_current_time votes += delta_vote virtual_scheduled_time = virtual_last_update + (1000*MAXVOTES - virtual_position) / votes </para>    </detaileddescription>
  </compounddef>
</doxygen>
