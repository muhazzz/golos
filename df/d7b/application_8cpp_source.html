<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=9"/>
    <meta name="generator" content="Doxygen 1.8.13"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Golos: libraries/app/application.cpp Source File</title>
    <link href="../../tabs.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="../../jquery.js"></script>
    <script type="text/javascript" src="../../dynsections.js"></script>
    <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
    <link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
    <link href="../../customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
    <div id="titlearea">
        <table cellspacing="0" cellpadding="0">
            <tbody>
            <tr style="height: 56px;">
                <td id="projectlogo"><img alt="Logo"
                                          src="../../golos.svg"/></td>
                <td id="projectalign" style="padding-left: 0.5em;">
                    <div id="projectname">Golos
                    </div>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
    <!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_bc0718b08fb2015b8e59c47b2805f60c.html">libraries</a></li><li class="navelem"><a class="el" href="../../dir_8977e940dc8a9651a9d5a1003e04e9f2.html">app</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">application.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../df/d7b/application_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 2015 Cryptonomex, Inc., and contributors.</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * The MIT License</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * Permission is hereby granted, free of charge, to any person obtaining a copy</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * of this software and associated documentation files (the &quot;Software&quot;), to deal</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * in the Software without restriction, including without limitation the rights</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * copies of the Software, and to permit persons to whom the Software is</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * furnished to do so, subject to the following conditions:</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * The above copyright notice and this permission notice shall be included in</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * all copies or substantial portions of the Software.</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> * THE SOFTWARE.</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d4/df0/api_8hpp.html">steemit/app/api.hpp</a>&gt;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../da/dc1/database__exceptions_8hpp.html">steemit/chain/database_exceptions.hpp</a>&gt;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;graphene/net/exceptions.hpp&gt;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;graphene/time/time.hpp&gt;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;fc/smart_ref_impl.hpp&gt;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;fc/io/fstream.hpp&gt;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;fc/network/resolve.hpp&gt;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &lt;boost/algorithm/string.hpp&gt;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &lt;boost/signals2.hpp&gt;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &lt;boost/range/algorithm/reverse.hpp&gt;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &lt;fc/log/file_appender.hpp&gt;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &lt;fc/log/logger_config.hpp&gt;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &lt;boost/range/adaptor/reversed.hpp&gt;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="keyword">namespace </span><a class="code" href="../../d9/d75/namespacesteemit.html">steemit</a> {</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keyword">namespace </span>app {</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        <span class="keyword">using</span> graphene::net::item_hash_t;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        <span class="keyword">using</span> graphene::net::item_id;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        <span class="keyword">using</span> graphene::net::message;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        <span class="keyword">using</span> graphene::net::block_message;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        <span class="keyword">using</span> graphene::net::trx_message;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <span class="keyword">using</span> protocol::block_header;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        <span class="keyword">using</span> protocol::signed_block_header;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <span class="keyword">using</span> protocol::signed_block;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <span class="keyword">using</span> protocol::block_id_type;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        <span class="keyword">using</span> std::vector;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <span class="keyword">namespace </span>bpo = boost::program_options;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="../../d1/d23/structsteemit_1_1app_1_1api__context.html#adb62c0f23b72c9e95fe623369af944ac">   63</a></span>&#160;        <a class="code" href="../../d1/d23/structsteemit_1_1app_1_1api__context.html#adb62c0f23b72c9e95fe623369af944ac">api_context::api_context</a>(<a class="code" href="../../de/d5e/classsteemit_1_1app_1_1application.html">application</a> &amp;_app, <span class="keyword">const</span> std::string &amp;_api_name, std::weak_ptr&lt;api_session_data&gt; _session)</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                : app(_app), api_name(_api_name), session(_session) {</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        }</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="../../db/d34/namespacesteemit_1_1app_1_1detail.html">   67</a></span>&#160;        <span class="keyword">namespace </span>detail {</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html">   69</a></span>&#160;            <span class="keyword">class </span><a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html">application_impl</a> : <span class="keyword">public</span> graphene::net::node_delegate {</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;            <span class="keyword">public</span>:</div><div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#acf92fce4358db60e97d15b3503b6d135">   71</a></span>&#160;                fc::optional&lt;fc::temp_file&gt; <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#acf92fce4358db60e97d15b3503b6d135">_lock_file</a>;</div><div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ac564fdb361ea1ef14acb5894503a63e6">   72</a></span>&#160;                <span class="keywordtype">bool</span> _is_block_producer = <span class="keyword">false</span>;</div><div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a3836944b78f4abc28fad65a65b8ab473">   73</a></span>&#160;                <span class="keywordtype">bool</span> _force_validate = <span class="keyword">false</span>;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a841d65fc5999ef6569bf651062e60032">   75</a></span>&#160;                <span class="keywordtype">void</span> <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a841d65fc5999ef6569bf651062e60032">reset_p2p_node</a>(<span class="keyword">const</span> fc::path &amp;data_dir) {</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                    <span class="keywordflow">try</span> {</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                        _p2p_network = std::make_shared&lt;graphene::net::node&gt;(<span class="stringliteral">&quot;Graphene Reference Implementation&quot;</span>);</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                        _p2p_network-&gt;load_configuration(data_dir / <span class="stringliteral">&quot;p2p&quot;</span>);</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                        _p2p_network-&gt;set_node_delegate(<span class="keyword">this</span>);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                        <span class="keywordflow">if</span> (_options-&gt;count(<span class="stringliteral">&quot;seed-node&quot;</span>)) {</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                            <span class="keyword">auto</span> seeds = _options-&gt;at(<span class="stringliteral">&quot;seed-node&quot;</span>).as&lt;vector&lt;string&gt;&gt;();</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keywordtype">string</span> &amp;endpoint_string : seeds) {</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                                <span class="keywordflow">try</span> {</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                                    std::vector&lt;fc::ip::endpoint&gt; endpoints = resolve_string_to_ip_endpoints(endpoint_string);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                                    <span class="keywordflow">for</span> (<span class="keyword">const</span> fc::ip::endpoint &amp;endpoint : endpoints) {</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                                        ilog(<span class="stringliteral">&quot;Adding seed node ${endpoint}&quot;</span>, (<span class="stringliteral">&quot;endpoint&quot;</span>, endpoint));</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                                        _p2p_network-&gt;add_node(endpoint);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                                        _p2p_network-&gt;connect_to_endpoint(endpoint);</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                                    }</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                                } <span class="keywordflow">catch</span> (<span class="keyword">const</span> fc::exception &amp;e) {</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                                    wlog(<span class="stringliteral">&quot;caught exception ${e} while adding seed node ${endpoint}&quot;</span>,</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                                            (<span class="stringliteral">&quot;e&quot;</span>, e.to_detail_string())(<span class="stringliteral">&quot;endpoint&quot;</span>, endpoint_string));</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                                }</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                            }</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                        }</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                        <span class="keywordflow">if</span> (_options-&gt;count(<span class="stringliteral">&quot;p2p-endpoint&quot;</span>)) {</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                            <span class="keyword">auto</span> p2p_endpoint = _options-&gt;at(<span class="stringliteral">&quot;p2p-endpoint&quot;</span>).as&lt;<span class="keywordtype">string</span>&gt;();</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                            <span class="keyword">auto</span> endpoints = resolve_string_to_ip_endpoints(p2p_endpoint);</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                            FC_ASSERT(endpoints.size(), <span class="stringliteral">&quot;p2p-endpoint ${hostname} did not resolve&quot;</span>, (<span class="stringliteral">&quot;hostname&quot;</span>, p2p_endpoint));</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                            _p2p_network-&gt;listen_on_endpoint(endpoints[0], <span class="keyword">true</span>);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                            _p2p_network-&gt;listen_on_port(0, <span class="keyword">false</span>);</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                        }</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                        <span class="keywordflow">if</span> (_options-&gt;count(<span class="stringliteral">&quot;p2p-max-connections&quot;</span>)) {</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                            fc::variant_object node_param = fc::variant_object(</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                                    <span class="stringliteral">&quot;maximum_number_of_connections&quot;</span>,</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                                    fc::variant(_options-&gt;at(<span class="stringliteral">&quot;p2p-max-connections&quot;</span>).as&lt;uint32_t&gt;()));</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                            _p2p_network-&gt;set_advanced_node_parameters(node_param);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                            ilog(<span class="stringliteral">&quot;Setting p2p max connections to ${n}&quot;</span>, (<span class="stringliteral">&quot;n&quot;</span>, node_param[<span class="stringliteral">&quot;maximum_number_of_connections&quot;</span>]));</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                        }</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                        _p2p_network-&gt;listen_to_p2p_network();</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                        ilog(<span class="stringliteral">&quot;Configured p2p node to listen on ${ip}&quot;</span>, (<span class="stringliteral">&quot;ip&quot;</span>, _p2p_network-&gt;get_actual_listening_endpoint()));</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                        _p2p_network-&gt;connect_to_p2p_network();</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                        idump((_chain_db-&gt;head_block_id()));</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                        _p2p_network-&gt;sync_from(graphene::net::item_id(graphene::net::core_message_type_enum::block_message_type,</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                                _chain_db-&gt;head_block_id()),</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                                std::vector&lt;uint32_t&gt;());</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                    } FC_CAPTURE_AND_RETHROW()</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                }</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#aefd56a9ef9fcb4d2b09c0b90c9918514">  127</a></span>&#160;                std::vector&lt;fc::ip::endpoint&gt; <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#aefd56a9ef9fcb4d2b09c0b90c9918514">resolve_string_to_ip_endpoints</a>(<span class="keyword">const</span> std::string &amp;endpoint_string) {</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                    <span class="keywordflow">try</span> {</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                        string::size_type colon_pos = endpoint_string.find(<span class="charliteral">&#39;:&#39;</span>);</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                        <span class="keywordflow">if</span> (colon_pos == std::string::npos)</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                            FC_THROW(<span class="stringliteral">&quot;Missing required port number in endpoint string \&quot;${endpoint_string}\&quot;&quot;</span>,</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                                    (<span class="stringliteral">&quot;endpoint_string&quot;</span>, endpoint_string));</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                        std::string port_string = endpoint_string.substr(</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                                colon_pos + 1);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                        <span class="keywordflow">try</span> {</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                            uint16_t port = boost::lexical_cast&lt;uint16_t&gt;(port_string);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                            std::string hostname = endpoint_string.substr(0, colon_pos);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                            std::vector&lt;fc::ip::endpoint&gt; endpoints = fc::resolve(hostname, port);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                            <span class="keywordflow">if</span> (endpoints.empty())</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                                FC_THROW_EXCEPTION(fc::unknown_host_exception, <span class="stringliteral">&quot;The host name can not be resolved: ${hostname}&quot;</span>, (<span class="stringliteral">&quot;hostname&quot;</span>, hostname));</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                            <span class="keywordflow">return</span> endpoints;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                        }</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                        <span class="keywordflow">catch</span> (<span class="keyword">const</span> boost::bad_lexical_cast &amp;) {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                            FC_THROW(<span class="stringliteral">&quot;Bad port: ${port}&quot;</span>, (<span class="stringliteral">&quot;port&quot;</span>, port_string));</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                        }</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                    }</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                    FC_CAPTURE_AND_RETHROW((endpoint_string))</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                }</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a3d5664fa0f199783c04369e314cbfb17">  151</a></span>&#160;                <span class="keywordtype">void</span> <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a3d5664fa0f199783c04369e314cbfb17">reset_websocket_server</a>() {</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                    <span class="keywordflow">try</span> {</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                        <span class="keywordflow">if</span> (!_options-&gt;count(<span class="stringliteral">&quot;rpc-endpoint&quot;</span>)) {</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                        }</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                        _websocket_server = std::make_shared&lt;fc::http::websocket_server&gt;();</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                        _websocket_server-&gt;on_connection([&amp;](<span class="keyword">const</span> fc::http::websocket_connection_ptr &amp;c) { on_connection(c); });</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                        <span class="keyword">auto</span> rpc_endpoint = _options-&gt;at(<span class="stringliteral">&quot;rpc-endpoint&quot;</span>).as&lt;<span class="keywordtype">string</span>&gt;();</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                        ilog(<span class="stringliteral">&quot;Configured websocket rpc to listen on ${ip}&quot;</span>, (<span class="stringliteral">&quot;ip&quot;</span>, rpc_endpoint));</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                        <span class="keyword">auto</span> endpoints = resolve_string_to_ip_endpoints(rpc_endpoint);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                        FC_ASSERT(endpoints.size(), <span class="stringliteral">&quot;rpc-endpoint ${hostname} did not resolve&quot;</span>, (<span class="stringliteral">&quot;hostname&quot;</span>, rpc_endpoint));</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                        _websocket_server-&gt;listen(endpoints[0]);</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                        _websocket_server-&gt;start_accept();</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                    } FC_CAPTURE_AND_RETHROW()</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                }</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#afb51c055f517a0ad44d744473db030ae">  170</a></span>&#160;                <span class="keywordtype">void</span> <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#afb51c055f517a0ad44d744473db030ae">reset_websocket_tls_server</a>() {</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                    <span class="keywordflow">try</span> {</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                        <span class="keywordflow">if</span> (!_options-&gt;count(<span class="stringliteral">&quot;rpc-tls-endpoint&quot;</span>)) {</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                        }</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                        <span class="keywordflow">if</span> (!_options-&gt;count(<span class="stringliteral">&quot;server-pem&quot;</span>)) {</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                            wlog(<span class="stringliteral">&quot;Please specify a server-pem to use rpc-tls-endpoint&quot;</span>);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                        }</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                        <span class="keywordtype">string</span> password = _options-&gt;count(<span class="stringliteral">&quot;server-pem-password&quot;</span>)</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                                          ? _options-&gt;at(<span class="stringliteral">&quot;server-pem-password&quot;</span>).as&lt;<span class="keywordtype">string</span>&gt;()</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                                          : <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                        _websocket_tls_server = std::make_shared&lt;fc::http::websocket_tls_server&gt;(_options-&gt;at(<span class="stringliteral">&quot;server-pem&quot;</span>).as&lt;<span class="keywordtype">string</span>&gt;(), password);</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                        _websocket_tls_server-&gt;on_connection([<span class="keyword">this</span>](<span class="keyword">const</span> fc::http::websocket_connection_ptr &amp;c) { on_connection(c); });</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                        <span class="keyword">auto</span> rpc_tls_endpoint = _options-&gt;at(<span class="stringliteral">&quot;rpc-tls-endpoint&quot;</span>).as&lt;<span class="keywordtype">string</span>&gt;();</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                        ilog(<span class="stringliteral">&quot;Configured websocket TLS rpc to listen on ${ip}&quot;</span>, (<span class="stringliteral">&quot;ip&quot;</span>, rpc_tls_endpoint));</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                        <span class="keyword">auto</span> endpoints = resolve_string_to_ip_endpoints(rpc_tls_endpoint);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                        FC_ASSERT(endpoints.size(), <span class="stringliteral">&quot;rpc-tls-endpoint ${hostname} did not resolve&quot;</span>, (<span class="stringliteral">&quot;hostname&quot;</span>, rpc_tls_endpoint));</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                        _websocket_tls_server-&gt;listen(endpoints[0]);</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                        _websocket_tls_server-&gt;start_accept();</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                    } FC_CAPTURE_AND_RETHROW()</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                }</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a371b86112f200e65c18a492dc6afe1bd">  195</a></span>&#160;                <span class="keywordtype">void</span> <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a371b86112f200e65c18a492dc6afe1bd">on_connection</a>(<span class="keyword">const</span> fc::http::websocket_connection_ptr &amp;c) {</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                    std::shared_ptr&lt;api_session_data&gt; <a class="code" href="../../d1/d23/structsteemit_1_1app_1_1api__context.html#a71a38f962c4c89a7d14aae81970e3749">session</a> = std::make_shared&lt;api_session_data&gt;();</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                    session-&gt;wsc = std::make_shared&lt;fc::rpc::websocket_api_connection&gt;(*c);</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                    <span class="keywordflow">for</span> (<span class="keyword">const</span> std::string &amp;name : _public_apis) {</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                        <a class="code" href="../../d1/d23/structsteemit_1_1app_1_1api__context.html">api_context</a> ctx(*_self, name, session);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                        fc::api_ptr api = create_api_by_name(ctx);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                        <span class="keywordflow">if</span> (!api) {</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                            elog(<span class="stringliteral">&quot;Couldn&#39;t create API ${name}&quot;</span>, (<span class="stringliteral">&quot;name&quot;</span>, name));</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                        }</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                        session-&gt;api_map[name] = api;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                        api-&gt;register_api(*session-&gt;wsc);</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                    }</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                    c-&gt;set_session_data(session);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                }</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a4312058c7c8f0631de73b5fe4c3a6f91">  212</a></span>&#160;                <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a4312058c7c8f0631de73b5fe4c3a6f91">application_impl</a>(<a class="code" href="../../de/d5e/classsteemit_1_1app_1_1application.html">application</a> *<span class="keyword">self</span>)</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                        : _self(self),</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                        <span class="comment">//_pending_trx_db(std::make_shared&lt;graphene::db::object_database&gt;()),</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                          _chain_db(<a class="code" href="../../d8/dcc/namespacestd.html">std</a>::make_shared&lt;chain::<a class="code" href="../../da/d98/classsteemit_1_1chain_1_1database.html">database</a>&gt;()) {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                }</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ad9253c72bbf051eacedb609f6981e17d">  218</a></span>&#160;                <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ad9253c72bbf051eacedb609f6981e17d">~application_impl</a>() {</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                }</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a8a2427dd60af853be10f7d0b12093197">  221</a></span>&#160;                <span class="keywordtype">void</span> <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a8a2427dd60af853be10f7d0b12093197">register_builtin_apis</a>() {</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                    _self-&gt;register_api_factory&lt;<a class="code" href="../../d3/df0/classsteemit_1_1app_1_1login__api.html">login_api</a>&gt;(<span class="stringliteral">&quot;login_api&quot;</span>);</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                    _self-&gt;register_api_factory&lt;<a class="code" href="../../d4/dbd/classsteemit_1_1app_1_1database__api.html">database_api</a>&gt;(<span class="stringliteral">&quot;database_api&quot;</span>);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                    _self-&gt;register_api_factory&lt;<a class="code" href="../../d6/d4b/classsteemit_1_1app_1_1network__node__api.html">network_node_api</a>&gt;(<span class="stringliteral">&quot;network_node_api&quot;</span>);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                    _self-&gt;register_api_factory&lt;<a class="code" href="../../df/d95/classsteemit_1_1app_1_1network__broadcast__api.html">network_broadcast_api</a>&gt;(<span class="stringliteral">&quot;network_broadcast_api&quot;</span>);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                }</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a45045ad57a849fcf180e4c5a6f58743d">  228</a></span>&#160;                <span class="keywordtype">void</span> <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a45045ad57a849fcf180e4c5a6f58743d">startup</a>() {</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                    <span class="keywordflow">try</span> {</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                        _shared_file_size = fc::parse_size(_options-&gt;at(<span class="stringliteral">&quot;shared-file-size&quot;</span>).as&lt;<span class="keywordtype">string</span>&gt;());</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                        ilog(<span class="stringliteral">&quot;shared_file_size is ${n} bytes&quot;</span>, (<span class="stringliteral">&quot;n&quot;</span>, _shared_file_size));</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                        <span class="keywordtype">bool</span> read_only = _options-&gt;count(<span class="stringliteral">&quot;read-only&quot;</span>);</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                        register_builtin_apis();</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                        <span class="keywordflow">if</span> (_options-&gt;count(<span class="stringliteral">&quot;check-locks&quot;</span>)) {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                            _chain_db-&gt;set_require_locking(<span class="keyword">true</span>);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                        }</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                        <span class="keywordflow">if</span> (_options-&gt;count(<span class="stringliteral">&quot;shared-file-dir&quot;</span>)) {</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                            _shared_dir = fc::path(_options-&gt;at(<span class="stringliteral">&quot;shared-file-dir&quot;</span>).as&lt;<span class="keywordtype">string</span>&gt;());</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                            _shared_dir = _data_dir / <span class="stringliteral">&quot;blockchain&quot;</span>;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                        }</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                        <span class="keywordflow">if</span> (!read_only) {</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                            _self-&gt;_read_only = <span class="keyword">false</span>;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                            ilog(<span class="stringliteral">&quot;Starting Golos node in write mode.&quot;</span>);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                            _max_block_age = _options-&gt;at(<span class="stringliteral">&quot;max-block-age&quot;</span>).as&lt;int32_t&gt;();</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                            <span class="keywordflow">if</span> (_options-&gt;count(<span class="stringliteral">&quot;resync-blockchain&quot;</span>)) {</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                                _chain_db-&gt;wipe(_data_dir /</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                                                <span class="stringliteral">&quot;blockchain&quot;</span>, _shared_dir, <span class="keyword">true</span>);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                            }</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                            _chain_db-&gt;set_flush_interval(_options-&gt;at(<span class="stringliteral">&quot;flush&quot;</span>).as&lt;uint32_t&gt;());</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                            flat_map&lt;uint32_t, block_id_type&gt; loaded_checkpoints;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                            <span class="keywordflow">if</span> (_options-&gt;count(<span class="stringliteral">&quot;checkpoint&quot;</span>)) {</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                                <span class="keyword">auto</span> cps = _options-&gt;at(<span class="stringliteral">&quot;checkpoint&quot;</span>).as&lt;vector&lt;string&gt;&gt;();</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                                loaded_checkpoints.reserve(cps.size());</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                                <span class="keywordflow">for</span> (<span class="keyword">auto</span> cp : cps) {</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                                    <span class="keyword">auto</span> item = <a class="code" href="../../d8/d9b/namespacesteemit_1_1chain.html#a41ef5a08e77cf4ee11fa9add4c8e0cdd">fc::json::from_string</a>(cp).as&lt;std::pair&lt;uint32_t, block_id_type&gt;&gt;();</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                                    loaded_checkpoints[item.first] = item.second;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                                }</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                            }</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                            _chain_db-&gt;add_checkpoints(loaded_checkpoints);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                            <span class="keywordflow">if</span> (_options-&gt;count(<span class="stringliteral">&quot;replay-blockchain&quot;</span>)) {</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                                ilog(<span class="stringliteral">&quot;Replaying blockchain on user request.&quot;</span>);</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                                _chain_db-&gt;reindex(_data_dir /</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                                                   <span class="stringliteral">&quot;blockchain&quot;</span>, _shared_dir, _shared_file_size);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                                <span class="keywordflow">try</span> {</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                                    _chain_db-&gt;open(_data_dir /</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                                                    <span class="stringliteral">&quot;blockchain&quot;</span>, _shared_dir, STEEMIT_INIT_SUPPLY, _shared_file_size, chainbase::database::read_write);\</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                                }</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                                <span class="keywordflow">catch</span> (fc::assert_exception &amp;) {</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                                    wlog(<span class="stringliteral">&quot;Error when opening database. Attempting reindex...&quot;</span>);</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                                    <span class="keywordflow">try</span> {</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                                        _chain_db-&gt;reindex(_data_dir /</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                                                           <span class="stringliteral">&quot;blockchain&quot;</span>, _shared_dir, _shared_file_size);</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                                    }</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                                    <span class="keywordflow">catch</span> (chain::block_log_exception &amp;) {</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                                        wlog(<span class="stringliteral">&quot;Error opening block log. Having to resync from network...&quot;</span>);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                                        _chain_db-&gt;open(_data_dir /</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                                                        <span class="stringliteral">&quot;blockchain&quot;</span>, _shared_dir, STEEMIT_INIT_SUPPLY, _shared_file_size, chainbase::database::read_write);</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                                    }</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                                }</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                            }</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                            <span class="keywordflow">if</span> (_options-&gt;count(<span class="stringliteral">&quot;force-validate&quot;</span>)) {</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                                ilog(<span class="stringliteral">&quot;All transaction signatures will be validated&quot;</span>);</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                                _force_validate = <span class="keyword">true</span>;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                            }</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                            graphene::time::now();</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                            ilog(<span class="stringliteral">&quot;Starting Golos node in read mode.&quot;</span>);</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                            _chain_db-&gt;open(_data_dir /</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                                            <span class="stringliteral">&quot;blockchain&quot;</span>, _shared_dir, STEEMIT_INIT_SUPPLY, _shared_file_size, chainbase::database::read_only);</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                            <span class="keywordflow">if</span> (_options-&gt;count(<span class="stringliteral">&quot;read-forward-rpc&quot;</span>)) {</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                                <span class="keywordflow">try</span> {</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                                    <span class="keyword">auto</span> ws_ptr = _self-&gt;_client.connect(_options-&gt;at(<span class="stringliteral">&quot;read-forward-rpc&quot;</span>).as&lt;<span class="keywordtype">string</span>&gt;());</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                                    <span class="keyword">auto</span> apic = std::make_shared&lt;fc::rpc::websocket_api_connection&gt;(*ws_ptr);</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                                    <span class="keyword">auto</span> login = apic-&gt;get_remote_api&lt;<a class="code" href="../../d3/df0/classsteemit_1_1app_1_1login__api.html">login_api</a>&gt;(1);</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                                    FC_ASSERT(login-&gt;login(<span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                                    _self-&gt;_remote_net_api = login-&gt;<a class="code" href="../../d3/df0/classsteemit_1_1app_1_1login__api.html#ad3ba91ac4eba18a27a1aaacbf787fb1c">get_api_by_name</a>(<span class="stringliteral">&quot;network_broadcast_api&quot;</span>)-&gt;as&lt;<a class="code" href="../../df/d95/classsteemit_1_1app_1_1network__broadcast__api.html">network_broadcast_api</a>&gt;();</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                                }</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                                <span class="keywordflow">catch</span> (fc::exception &amp;e) {</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                                    wlog(<span class="stringliteral">&quot;Error connecting to remote RPC, network api forwarding disabled.  ${e}&quot;</span>, (<span class="stringliteral">&quot;e&quot;</span>, e.to_detail_string()));</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                                }</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                            }</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                        }</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                        <span class="keywordflow">if</span> (_options-&gt;count(<span class="stringliteral">&quot;api-user&quot;</span>)) {</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                            <span class="keywordflow">for</span> (<span class="keyword">const</span> std::string &amp;api_access_str : _options-&gt;at(<span class="stringliteral">&quot;api-user&quot;</span>).as&lt;std::vector&lt;std::string&gt;&gt;()) {</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                                <a class="code" href="../../df/df9/structsteemit_1_1app_1_1api__access__info.html">api_access_info</a> info = <a class="code" href="../../d8/d9b/namespacesteemit_1_1chain.html#a41ef5a08e77cf4ee11fa9add4c8e0cdd">fc::json::from_string</a>(api_access_str).as&lt;<a class="code" href="../../df/df9/structsteemit_1_1app_1_1api__access__info.html">api_access_info</a>&gt;();</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                                FC_ASSERT(info.<a class="code" href="../../df/df9/structsteemit_1_1app_1_1api__access__info.html#a1cab99d18e883cf8509e3046b53dd3fa">username</a> != <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                                _apiaccess.permission_map[info.<a class="code" href="../../df/df9/structsteemit_1_1app_1_1api__access__info.html#a1cab99d18e883cf8509e3046b53dd3fa">username</a>] = info;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                            }</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                            <span class="comment">// TODO:  Remove this generous default access policy</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                            <span class="comment">// when the UI logs in properly</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                            _apiaccess = <a class="code" href="../../d5/de0/structsteemit_1_1app_1_1api__access.html">api_access</a>();</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                            <a class="code" href="../../df/df9/structsteemit_1_1app_1_1api__access__info.html">api_access_info</a> wild_access;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                            wild_access.<a class="code" href="../../df/df9/structsteemit_1_1app_1_1api__access__info.html#a1cab99d18e883cf8509e3046b53dd3fa">username</a> = <span class="stringliteral">&quot;*&quot;</span>;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                            wild_access.<a class="code" href="../../df/df9/structsteemit_1_1app_1_1api__access__info.html#a228de90427c5a9c3b2d2e63f8b3c153c">password_hash_b64</a> = <span class="stringliteral">&quot;*&quot;</span>;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                            wild_access.<a class="code" href="../../df/df9/structsteemit_1_1app_1_1api__access__info.html#a516b6eaa118c3efdc6e01a2eeb3acfe4">password_salt_b64</a> = <span class="stringliteral">&quot;*&quot;</span>;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                            wild_access.<a class="code" href="../../df/df9/structsteemit_1_1app_1_1api__access__info.html#a257a7346f767be5d61ea8ca8c04c03b6">allowed_apis</a>.push_back(<span class="stringliteral">&quot;database_api&quot;</span>);</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                            wild_access.<a class="code" href="../../df/df9/structsteemit_1_1app_1_1api__access__info.html#a257a7346f767be5d61ea8ca8c04c03b6">allowed_apis</a>.push_back(<span class="stringliteral">&quot;network_broadcast_api&quot;</span>);</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                            wild_access.<a class="code" href="../../df/df9/structsteemit_1_1app_1_1api__access__info.html#a257a7346f767be5d61ea8ca8c04c03b6">allowed_apis</a>.push_back(<span class="stringliteral">&quot;tag_api&quot;</span>);</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                            _apiaccess.permission_map[<span class="stringliteral">&quot;*&quot;</span>] = wild_access;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                        }</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                        <span class="keywordflow">for</span> (<span class="keyword">const</span> std::string &amp;arg : _options-&gt;at(<span class="stringliteral">&quot;public-api&quot;</span>).as&lt;std::vector&lt;std::string&gt;&gt;()) {</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                            vector&lt;string&gt; names;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                            boost::split(names, arg, boost::is_any_of(<span class="stringliteral">&quot; \t,&quot;</span>));</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                            <span class="keywordflow">for</span> (<span class="keyword">const</span> std::string &amp;name : names) {</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                                ilog(<span class="stringliteral">&quot;API ${name} enabled publicly&quot;</span>, (<span class="stringliteral">&quot;name&quot;</span>, name));</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                                _public_apis.push_back(name);</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                            }</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                        }</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                        _running = <span class="keyword">true</span>;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                        <span class="keywordflow">if</span> (!read_only) {</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                            reset_p2p_node(_data_dir);</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                        }</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                        reset_websocket_server();</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                        reset_websocket_tls_server();</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                    } FC_LOG_AND_RETHROW()</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                }</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#afdaf7e18985e8dd81a1c2b360f662156">  357</a></span>&#160;                optional&lt;api_access_info&gt; <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#afdaf7e18985e8dd81a1c2b360f662156">get_api_access_info</a>(<span class="keyword">const</span> <span class="keywordtype">string</span> &amp;username)<span class="keyword"> const </span>{</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                    optional&lt;api_access_info&gt; result;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                    <span class="keyword">auto</span> it = _apiaccess.permission_map.find(username);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                    <span class="keywordflow">if</span> (it == _apiaccess.permission_map.end()) {</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                        it = _apiaccess.permission_map.find(<span class="stringliteral">&quot;*&quot;</span>);</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                        <span class="keywordflow">if</span> (it == _apiaccess.permission_map.end()) {</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                            <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                        }</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                    }</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                    <span class="keywordflow">return</span> it-&gt;second;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                }</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div><div class="line"><a name="l00369"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ac8283494f835a3fd535052eaed3ce692">  369</a></span>&#160;                <span class="keywordtype">void</span> <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ac8283494f835a3fd535052eaed3ce692">set_api_access_info</a>(<span class="keyword">const</span> <span class="keywordtype">string</span> &amp;username, <a class="code" href="../../df/df9/structsteemit_1_1app_1_1api__access__info.html">api_access_info</a> &amp;&amp;permissions) {</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                    _apiaccess.permission_map.insert(std::make_pair(username, std::move(permissions)));</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                }</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div><div class="line"><a name="l00373"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a7901ae02cb6099d15269b504370b2894">  373</a></span>&#160;                <span class="keywordtype">void</span> <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a7901ae02cb6099d15269b504370b2894">register_api_factory</a>(<span class="keyword">const</span> <span class="keywordtype">string</span> &amp;name, std::function&lt;fc::api_ptr(<span class="keyword">const</span> <a class="code" href="../../d1/d23/structsteemit_1_1app_1_1api__context.html">api_context</a> &amp;)&gt; factory) {</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                    _api_factories_by_name[name] = factory;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                }</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div><div class="line"><a name="l00377"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ac419c9f3f96b5e518a8d1bc25a302b19">  377</a></span>&#160;                fc::api_ptr <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ac419c9f3f96b5e518a8d1bc25a302b19">create_api_by_name</a>(<span class="keyword">const</span> <a class="code" href="../../d1/d23/structsteemit_1_1app_1_1api__context.html">api_context</a> &amp;ctx) {</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                    <span class="keyword">auto</span> it = _api_factories_by_name.find(ctx.<a class="code" href="../../d1/d23/structsteemit_1_1app_1_1api__context.html#a9adb72ff067cb73e3f1933cff2c08dd4">api_name</a>);</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                    <span class="keywordflow">if</span> (it == _api_factories_by_name.end()) {</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                        wlog(<span class="stringliteral">&quot;unknown api: ${api}&quot;</span>, (<span class="stringliteral">&quot;api&quot;</span>, ctx.<a class="code" href="../../d1/d23/structsteemit_1_1app_1_1api__context.html#a9adb72ff067cb73e3f1933cff2c08dd4">api_name</a>));</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                    }</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                    <span class="keywordflow">return</span> it-&gt;second(ctx);</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                }</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div><div class="line"><a name="l00389"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a5f85b572adcf23a26968afe05e08628f">  389</a></span>&#160;                <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a5f85b572adcf23a26968afe05e08628f">has_item</a>(<span class="keyword">const</span> graphene::net::item_id &amp;<span class="keywordtype">id</span>)<span class="keyword"> override </span>{</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                    <span class="comment">// If the node is shutting down we don&#39;t care about fetching items</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                    <span class="keywordflow">if</span> (!_running) {</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                    }</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                    <span class="keywordflow">try</span> {</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                        <span class="keywordflow">if</span> (<span class="keywordtype">id</span>.item_type == graphene::net::block_message_type) {</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                            <span class="keywordflow">return</span> _chain_db-&gt;is_known_block(<span class="keywordtype">id</span>.item_hash);</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                            <span class="keywordflow">return</span> _chain_db-&gt;is_known_transaction(<span class="keywordtype">id</span>.item_hash);</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                        }</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                    }</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                    FC_CAPTURE_AND_RETHROW((<span class="keywordtype">id</span>))</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                }</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a42d0757e6ff0fb4b4ba51bfba853d960">  413</a></span>&#160;                <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a42d0757e6ff0fb4b4ba51bfba853d960">handle_block</a>(<span class="keyword">const</span> graphene::net::block_message &amp;blk_msg, <span class="keywordtype">bool</span> sync_mode,</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                        std::vector&lt;fc::uint160_t&gt; &amp;contained_transaction_message_ids)<span class="keyword"> override </span>{</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                    <span class="keywordflow">try</span> {</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                        <span class="keywordflow">if</span> (_running) {</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                            <span class="keywordflow">if</span> (sync_mode)</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                                fc_ilog(fc::logger::get(<span class="stringliteral">&quot;sync&quot;</span>),</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                                        <span class="stringliteral">&quot;chain pushing sync block #${block_num} ${block_hash}, head is ${head}&quot;</span>,</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                                        (<span class="stringliteral">&quot;block_num&quot;</span>, blk_msg.block.block_num())</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                                                (<span class="stringliteral">&quot;block_hash&quot;</span>, blk_msg.block_id)</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                                                (<span class="stringliteral">&quot;head&quot;</span>, _chain_db-&gt;head_block_num()));</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                            <span class="keywordflow">else</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                                fc_ilog(fc::logger::get(<span class="stringliteral">&quot;sync&quot;</span>),</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                                        <span class="stringliteral">&quot;chain pushing block #${block_num} ${block_hash}, head is ${head}&quot;</span>,</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                                        (<span class="stringliteral">&quot;block_num&quot;</span>, blk_msg.block.block_num())</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                                                (<span class="stringliteral">&quot;block_hash&quot;</span>, blk_msg.block_id)</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                                                (<span class="stringliteral">&quot;head&quot;</span>, _chain_db-&gt;head_block_num()));</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                            <span class="keywordflow">if</span> (sync_mode &amp;&amp;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                                blk_msg.block.block_num() % 10000 == 0) {</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                                ilog(<span class="stringliteral">&quot;Syncing Blockchain --- Got block: #${n} time: ${t}&quot;</span>,</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                                        (<span class="stringliteral">&quot;t&quot;</span>, blk_msg.block.timestamp)</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                                                (<span class="stringliteral">&quot;n&quot;</span>, blk_msg.block.block_num()));</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                            }</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                            time_point_sec now = graphene::time::now();</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                            uint64_t max_accept_time = now.sec_since_epoch();</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                            max_accept_time += allow_future_time;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                            FC_ASSERT(</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                                    blk_msg.block.timestamp.sec_since_epoch() &lt;=</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                                    max_accept_time);</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                            <span class="keywordflow">try</span> {</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                                <span class="comment">// TODO: in the case where this block is valid but on a fork that&#39;s too old for us to switch to,</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                                <span class="comment">// you can help the network code out by throwing a block_older_than_undo_history exception.</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                                <span class="comment">// when the net code sees that, it will stop trying to push blocks from that chain, but</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                                <span class="comment">// leave that peer connected so that they can get sync blocks from us</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                                <span class="keywordtype">bool</span> result = _chain_db-&gt;push_block(blk_msg.block, (_is_block_producer |</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                                                                                    _force_validate)</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                                                                                   ? <a class="code" href="../../da/d98/classsteemit_1_1chain_1_1database.html#afd81b7d9bc2099fda77544ddc53f9dc5addc8b88d20727cbd0fc4a1b37e2cc4ed">database::skip_nothing</a></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                                                                                   : <a class="code" href="../../da/d98/classsteemit_1_1chain_1_1database.html#afd81b7d9bc2099fda77544ddc53f9dc5a25ee59e2966d45e3c4a6e2c2c6775302">database::skip_transaction_signatures</a>);</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                                <span class="keywordflow">if</span> (!sync_mode &amp;&amp;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                                    blk_msg.block.transactions.size()) {</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                                    ilog(<span class="stringliteral">&quot;Got ${t} transactions from network on block ${b}&quot;</span>,</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                                            (<span class="stringliteral">&quot;t&quot;</span>, blk_msg.block.transactions.size())</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                                                    (<span class="stringliteral">&quot;b&quot;</span>, blk_msg.block.block_num()));</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                                }</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                                <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                            } <span class="keywordflow">catch</span> (<span class="keyword">const</span> steemit::chain::unlinkable_block_exception &amp;e) {</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                                <span class="comment">// translate to a graphene::net exception</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                                fc_elog(fc::logger::get(<span class="stringliteral">&quot;sync&quot;</span>),</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                                        <span class="stringliteral">&quot;Error when pushing block, current head block is ${head}:\n${e}&quot;</span>,</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                                        (<span class="stringliteral">&quot;e&quot;</span>, e.to_detail_string())</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                                                (<span class="stringliteral">&quot;head&quot;</span>, _chain_db-&gt;head_block_num()));</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                                elog(<span class="stringliteral">&quot;Error when pushing block:\n${e}&quot;</span>, (<span class="stringliteral">&quot;e&quot;</span>, e.to_detail_string()));</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                                FC_THROW_EXCEPTION(graphene::net::unlinkable_block_exception, <span class="stringliteral">&quot;Error when pushing block:\n${e}&quot;</span>, (<span class="stringliteral">&quot;e&quot;</span>, e.to_detail_string()));</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                            } <span class="keywordflow">catch</span> (<span class="keyword">const</span> fc::exception &amp;e) {</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                                fc_elog(fc::logger::get(<span class="stringliteral">&quot;sync&quot;</span>),</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                                        <span class="stringliteral">&quot;Error when pushing block, current head block is ${head}:\n${e}&quot;</span>,</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                                        (<span class="stringliteral">&quot;e&quot;</span>, e.to_detail_string())</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                                                (<span class="stringliteral">&quot;head&quot;</span>, _chain_db-&gt;head_block_num()));</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                                elog(<span class="stringliteral">&quot;Error when pushing block:\n${e}&quot;</span>, (<span class="stringliteral">&quot;e&quot;</span>, e.to_detail_string()));</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                                <span class="keywordflow">throw</span>;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                            }</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                        }</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                    } FC_CAPTURE_AND_RETHROW((blk_msg)(sync_mode))</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                }</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div><div class="line"><a name="l00483"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ad3da61169da155185dfd9a2e302b2b79">  483</a></span>&#160;                <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ad3da61169da155185dfd9a2e302b2b79">handle_transaction</a>(<span class="keyword">const</span> graphene::net::trx_message &amp;transaction_message)<span class="keyword"> override </span>{</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                    <span class="keywordflow">try</span> {</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                        <span class="keywordflow">if</span> (_running) {</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                            _chain_db-&gt;push_transaction(transaction_message.trx);</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                        }</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                    } FC_CAPTURE_AND_RETHROW((transaction_message))</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                }</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div><div class="line"><a name="l00491"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a9e3240ac0577124af7bb863a81507d76">  491</a></span>&#160;                <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a9e3240ac0577124af7bb863a81507d76">handle_message</a>(<span class="keyword">const</span> message &amp;message_to_process)<span class="keyword"> override </span>{</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                    <span class="comment">// not a transaction, not a block</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                    FC_THROW(<span class="stringliteral">&quot;Invalid Message Type&quot;</span>);</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                }</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div><div class="line"><a name="l00496"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ac0bff9d48659914c1b708fbb2a1edfe0">  496</a></span>&#160;                <span class="keywordtype">bool</span> <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ac0bff9d48659914c1b708fbb2a1edfe0">is_included_block</a>(<span class="keyword">const</span> block_id_type &amp;block_id) {</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                    uint32_t block_num = block_header::num_from_id(block_id);</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                    block_id_type block_id_in_preferred_chain = _chain_db-&gt;get_block_id_for_num(block_num);</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                    <span class="keywordflow">return</span> block_id == block_id_in_preferred_chain;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                }</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div><div class="line"><a name="l00511"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ae8b30d90fca5ece635d932cb81e9afe5">  511</a></span>&#160;                <span class="keyword">virtual</span> std::vector&lt;item_hash_t&gt; <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ae8b30d90fca5ece635d932cb81e9afe5">get_block_ids</a>(<span class="keyword">const</span> std::vector&lt;item_hash_t&gt; &amp;blockchain_synopsis,</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                        uint32_t &amp;remaining_item_count,</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                        uint32_t limit)<span class="keyword"> override </span>{</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                    <span class="keywordflow">try</span> {</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                        vector&lt;block_id_type&gt; result;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                        remaining_item_count = 0;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                        <span class="keywordflow">if</span> (_chain_db-&gt;head_block_num() == 0) {</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                            <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                        }</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                        result.reserve(limit);</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                        block_id_type last_known_block_id;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                        <span class="keywordflow">if</span> (blockchain_synopsis.empty() ||</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                            (blockchain_synopsis.size() == 1 &amp;&amp;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                             blockchain_synopsis[0] == block_id_type())) {</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                            <span class="comment">// peer has sent us an empty synopsis meaning they have no blocks.</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                            <span class="comment">// A bug in old versions would cause them to send a synopsis containing block 000000000</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                            <span class="comment">// when they had an empty blockchain, so pretend they sent the right thing here.</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                            <span class="comment">// do nothing, leave last_known_block_id set to zero</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                            <span class="keywordtype">bool</span> found_a_block_in_synopsis = <span class="keyword">false</span>;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                            <span class="keywordflow">for</span> (<span class="keyword">const</span> item_hash_t &amp;block_id_in_synopsis : boost::adaptors::reverse(blockchain_synopsis)) {</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                                <span class="keywordflow">if</span> (block_id_in_synopsis == block_id_type() ||</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                                    (_chain_db-&gt;is_known_block(block_id_in_synopsis) &amp;&amp;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                                     is_included_block(block_id_in_synopsis))) {</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                                    last_known_block_id = block_id_in_synopsis;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                                    found_a_block_in_synopsis = <span class="keyword">true</span>;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                                }</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                            }</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                            <span class="keywordflow">if</span> (!found_a_block_in_synopsis)</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                                FC_THROW_EXCEPTION(graphene::net::peer_is_on_an_unreachable_fork, <span class="stringliteral">&quot;Unable to provide a list of blocks starting at any of the blocks in peer&#39;s synopsis&quot;</span>);</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                        }</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                        <span class="keywordflow">for</span> (uint32_t num = block_header::num_from_id(last_known_block_id);</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                             num &lt;= _chain_db-&gt;head_block_num() &amp;&amp;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                             result.size() &lt; limit;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                             ++num) {</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                            <span class="keywordflow">if</span> (num &gt; 0) {</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                                result.push_back(_chain_db-&gt;get_block_id_for_num(num));</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                            }</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                        }</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                        <span class="keywordflow">if</span> (!result.empty() &amp;&amp;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                            block_header::num_from_id(result.back()) &lt;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                            _chain_db-&gt;head_block_num()) {</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                            remaining_item_count = _chain_db-&gt;head_block_num() -</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                                                   block_header::num_from_id(result.back());</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                        }</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                        <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                    } FC_CAPTURE_AND_RETHROW((blockchain_synopsis)(remaining_item_count)(limit))</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                }</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div><div class="line"><a name="l00569"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a52ea2173abc396d98017d5e933226e80">  569</a></span>&#160;                <span class="keyword">virtual</span> message <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a52ea2173abc396d98017d5e933226e80">get_item</a>(<span class="keyword">const</span> item_id &amp;<span class="keywordtype">id</span>)<span class="keyword"> override </span>{</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                    <span class="keywordflow">try</span> {</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                        <span class="comment">// ilog(&quot;Request for item ${id}&quot;, (&quot;id&quot;, id));</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                        <span class="keywordflow">if</span> (<span class="keywordtype">id</span>.item_type == graphene::net::block_message_type) {</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                            <span class="keyword">auto</span> opt_block = _chain_db-&gt;fetch_block_by_id(<span class="keywordtype">id</span>.item_hash);</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                            <span class="keywordflow">if</span> (!opt_block)</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                                elog(<span class="stringliteral">&quot;Couldn&#39;t find block ${id} -- corresponding ID in our chain is ${id2}&quot;</span>,</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                                        (<span class="stringliteral">&quot;id&quot;</span>, <span class="keywordtype">id</span>.item_hash)(<span class="stringliteral">&quot;id2&quot;</span>, _chain_db-&gt;get_block_id_for_num(block_header::num_from_id(<span class="keywordtype">id</span>.item_hash))));</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                            FC_ASSERT(opt_block.valid());</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                            <span class="comment">// ilog(&quot;Serving up block #${num}&quot;, (&quot;num&quot;, opt_block-&gt;block_num()));</span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                            <span class="keywordflow">return</span> block_message(std::move(*opt_block));</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                        }</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                        <span class="keywordflow">return</span> trx_message(_chain_db-&gt;get_recent_transaction(<span class="keywordtype">id</span>.item_hash));</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                    } FC_CAPTURE_AND_RETHROW((<span class="keywordtype">id</span>))</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                }</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div><div class="line"><a name="l00643"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a953b9971e7e523b9a38ef3cd8524e167">  643</a></span>&#160;                <span class="keyword">virtual</span> std::vector&lt;item_hash_t&gt; <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a953b9971e7e523b9a38ef3cd8524e167">get_blockchain_synopsis</a>(<span class="keyword">const</span> item_hash_t &amp;reference_point,</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                        uint32_t number_of_blocks_after_reference_point)<span class="keyword"> override </span>{</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                    <span class="keywordflow">try</span> {</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                        std::vector&lt;item_hash_t&gt; synopsis;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                        synopsis.reserve(30);</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                        uint32_t high_block_num;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                        uint32_t non_fork_high_block_num;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                        uint32_t low_block_num = _chain_db-&gt;last_non_undoable_block_num();</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                        std::vector&lt;block_id_type&gt; fork_history;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                        <span class="keywordflow">if</span> (reference_point != item_hash_t()) {</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                            <span class="comment">// the node is asking for a summary of the block chain up to a specified</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                            <span class="comment">// block, which may or may not be on a fork</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                            <span class="comment">// for now, assume it&#39;s not on a fork</span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                            <span class="keywordflow">if</span> (is_included_block(reference_point)) {</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;                                <span class="comment">// reference_point is a block we know about and is on the main chain</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                                uint32_t reference_point_block_num = block_header::num_from_id(reference_point);</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                                assert(reference_point_block_num &gt; 0);</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                                high_block_num = reference_point_block_num;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                                non_fork_high_block_num = high_block_num;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                                <span class="keywordflow">if</span> (reference_point_block_num &lt; low_block_num) {</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                                    <span class="comment">// we&#39;re on the same fork (at least as far as reference_point) but we&#39;ve passed</span></div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                                    <span class="comment">// reference point and could no longer undo that far if we diverged after that</span></div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                                    <span class="comment">// block.  This should probably only happen due to a race condition where</span></div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                                    <span class="comment">// the network thread calls this function, and then immediately pushes a bunch of blocks,</span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                                    <span class="comment">// then the main thread finally processes this function.</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                                    <span class="comment">// with the current framework, there&#39;s not much we can do to tell the network</span></div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                                    <span class="comment">// thread what our current head block is, so we&#39;ll just pretend that</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                                    <span class="comment">// our head is actually the reference point.</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                                    <span class="comment">// this *may* enable us to fetch blocks that we&#39;re unable to push, but that should</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                                    <span class="comment">// be a rare case (and correctly handled)</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                                    low_block_num = reference_point_block_num;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                                }</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                                <span class="comment">// block is a block we know about, but it is on a fork</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                                <span class="keywordflow">try</span> {</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                                    fork_history = _chain_db-&gt;get_block_ids_on_fork(reference_point);</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                                    <span class="comment">// returns a vector where the last element is the common ancestor with the preferred chain,</span></div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                                    <span class="comment">// and the first element is the reference point you passed in</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                                    assert(fork_history.size() &gt;= 2);</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                                    <span class="keywordflow">if</span> (fork_history.front() !=</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                                        reference_point) {</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                                        edump((fork_history)(reference_point));</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                                        assert(fork_history.front() ==</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                                               reference_point);</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                                    }</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                                    block_id_type last_non_fork_block = fork_history.back();</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                                    fork_history.pop_back();  <span class="comment">// remove the common ancestor</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                                    boost::reverse(fork_history);</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                                    <span class="keywordflow">if</span> (last_non_fork_block ==</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                                        block_id_type()) { <span class="comment">// if the fork goes all the way back to genesis (does graphene&#39;s fork db allow this?)</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                                        non_fork_high_block_num = 0;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                                    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                                        non_fork_high_block_num = block_header::num_from_id(last_non_fork_block);</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                                    }</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                                    high_block_num = non_fork_high_block_num +</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                                                     fork_history.size();</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;                                    assert(high_block_num ==</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                                           block_header::num_from_id(fork_history.back()));</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                                }</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                                <span class="keywordflow">catch</span> (<span class="keyword">const</span> fc::exception &amp;e) {</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                                    <span class="comment">// unable to get fork history for some reason.  maybe not linked?</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                                    <span class="comment">// we can&#39;t return a synopsis of its chain</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                                    elog(<span class="stringliteral">&quot;Unable to construct a blockchain synopsis for reference hash ${hash}: ${exception}&quot;</span>, (<span class="stringliteral">&quot;hash&quot;</span>, reference_point)(<span class="stringliteral">&quot;exception&quot;</span>, e));</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;                                    <span class="keywordflow">throw</span>;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;                                }</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                                <span class="keywordflow">if</span> (non_fork_high_block_num &lt; low_block_num) {</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                                    wlog(<span class="stringliteral">&quot;Unable to generate a usable synopsis because the peer we&#39;re generating it for forked too long ago &quot;</span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                                            <span class="stringliteral">&quot;(our chains diverge after block #${non_fork_high_block_num} but only undoable to block #${low_block_num})&quot;</span>,</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                                            (<span class="stringliteral">&quot;low_block_num&quot;</span>, low_block_num)</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                                                    (<span class="stringliteral">&quot;non_fork_high_block_num&quot;</span>, non_fork_high_block_num));</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;                                    FC_THROW_EXCEPTION(graphene::net::block_older_than_undo_history, <span class="stringliteral">&quot;Peer is are on a fork I&#39;m unable to switch to&quot;</span>);</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;                                }</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                            }</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;                        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                            <span class="comment">// no reference point specified, summarize the whole block chain</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;                            high_block_num = _chain_db-&gt;head_block_num();</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;                            non_fork_high_block_num = high_block_num;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;                            <span class="keywordflow">if</span> (high_block_num == 0) {</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;                                <span class="keywordflow">return</span> synopsis;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                            } <span class="comment">// we have no blocks</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                        }</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                        <span class="keywordflow">if</span> (low_block_num == 0) {</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                            low_block_num = 1;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                        }</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                        <span class="comment">// at this point:</span></div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                        <span class="comment">// low_block_num is the block before the first block we can undo,</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                        <span class="comment">// non_fork_high_block_num is the block before the fork (if the peer is on a fork, or otherwise it is the same as high_block_num)</span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                        <span class="comment">// high_block_num is the block number of the reference block, or the end of the chain if no reference provided</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                        <span class="comment">// true_high_block_num is the ending block number after the network code appends any item ids it</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                        <span class="comment">// knows about that we don&#39;t</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                        uint32_t true_high_block_num = high_block_num +</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                                                       number_of_blocks_after_reference_point;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                        <span class="keywordflow">do</span> {</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;                            <span class="comment">// for each block in the synopsis, figure out where to pull the block id from.</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                            <span class="comment">// if it&#39;s &lt;= non_fork_high_block_num, we grab it from the main blockchain;</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                            <span class="comment">// if it&#39;s not, we pull it from the fork history</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;                            <span class="keywordflow">if</span> (low_block_num &lt;= non_fork_high_block_num) {</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;                                synopsis.push_back(_chain_db-&gt;get_block_id_for_num(low_block_num));</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;                            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                                synopsis.push_back(fork_history[low_block_num -</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;                                                                non_fork_high_block_num -</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                                                                1]);</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                            }</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;                            low_block_num +=</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                                    (true_high_block_num - low_block_num + 2) /</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                                    2;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                        } <span class="keywordflow">while</span> (low_block_num &lt;= high_block_num);</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                        <span class="comment">//idump((synopsis));</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                        <span class="keywordflow">return</span> synopsis;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                    } FC_CAPTURE_AND_RETHROW()</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                }</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;</div><div class="line"><a name="l00771"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a363b461d5abcdeb9d6a0dbedf38b26c8">  771</a></span>&#160;                <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a363b461d5abcdeb9d6a0dbedf38b26c8">sync_status</a>(uint32_t item_type, uint32_t item_count)<span class="keyword"> override </span>{</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                    <span class="comment">// any status reports to GUI go here</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                }</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;</div><div class="line"><a name="l00778"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#aaaa1ff832e0b86a447e6cfaacbf2ec66">  778</a></span>&#160;                <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#aaaa1ff832e0b86a447e6cfaacbf2ec66">connection_count_changed</a>(uint32_t c)<span class="keyword"> override </span>{</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                    <span class="comment">// any status reports to GUI go here</span></div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                }</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div><div class="line"><a name="l00782"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ac39432b8121c265ff56cf6fdebb6a267">  782</a></span>&#160;                <span class="keyword">virtual</span> uint32_t <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ac39432b8121c265ff56cf6fdebb6a267">get_block_number</a>(<span class="keyword">const</span> item_hash_t &amp;block_id)<span class="keyword"> override </span>{</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                    <span class="keywordflow">try</span> {</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                        <span class="keywordflow">return</span> block_header::num_from_id(block_id);</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                    } FC_CAPTURE_AND_RETHROW((block_id))</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                }</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;</div><div class="line"><a name="l00792"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a4ae0d3841eb29ecbf8f77459a65e2257">  792</a></span>&#160;                <span class="keyword">virtual</span> fc::time_point_sec <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a4ae0d3841eb29ecbf8f77459a65e2257">get_block_time</a>(<span class="keyword">const</span> item_hash_t &amp;block_id)<span class="keyword"> override </span>{</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;                    <span class="keywordflow">try</span> {</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;                        <span class="keyword">auto</span> opt_block = _chain_db-&gt;fetch_block_by_id(block_id);</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;                        <span class="keywordflow">if</span> (opt_block.valid()) {</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;                            <span class="keywordflow">return</span> opt_block-&gt;timestamp;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;                        }</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;                        <span class="keywordflow">return</span> fc::time_point_sec::min();</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;                    } FC_CAPTURE_AND_RETHROW((block_id))</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;                }</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;</div><div class="line"><a name="l00803"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a8b1a9300dfea908827c69eb160e3b88d">  803</a></span>&#160;                <span class="keyword">virtual</span> fc::time_point_sec <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a8b1a9300dfea908827c69eb160e3b88d">get_blockchain_now</a>()<span class="keyword"> override </span>{</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                    <span class="keywordflow">return</span> graphene::time::now();</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                }</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;</div><div class="line"><a name="l00807"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ad598f55cec78f2fbf65a27288a49556a">  807</a></span>&#160;                <span class="keyword">virtual</span> item_hash_t <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ad598f55cec78f2fbf65a27288a49556a">get_head_block_id</a>()<span class="keyword"> const override </span>{</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;                    <span class="keywordflow">return</span> _chain_db-&gt;head_block_id();</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                }</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;</div><div class="line"><a name="l00811"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#af0f4da8df1b36f849ac4bae88b34ff72">  811</a></span>&#160;                <span class="keyword">virtual</span> uint32_t <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#af0f4da8df1b36f849ac4bae88b34ff72">estimate_last_known_fork_from_git_revision_timestamp</a>(uint32_t unix_timestamp)<span class="keyword"> const override </span>{</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;                    <span class="keywordflow">return</span> 0; <span class="comment">// there are no forks in graphene</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                }</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;</div><div class="line"><a name="l00815"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a574c4d44e79bac626423a648dcf076be">  815</a></span>&#160;                <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a574c4d44e79bac626423a648dcf076be">error_encountered</a>(<span class="keyword">const</span> std::string &amp;message, <span class="keyword">const</span> fc::oexception &amp;error)<span class="keyword"> override </span>{</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;                    <span class="comment">// notify GUI or something cool</span></div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                }</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;</div><div class="line"><a name="l00819"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a202f56ac00a3a49a635a7615f9da071f">  819</a></span>&#160;                <span class="keywordtype">void</span> <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a202f56ac00a3a49a635a7615f9da071f">get_max_block_age</a>(int32_t &amp;result) {</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;                    result = _max_block_age;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;                    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;                }</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;</div><div class="line"><a name="l00824"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a378fa27c56fc6ae358e64bd02958b587">  824</a></span>&#160;                <span class="keywordtype">void</span> <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a378fa27c56fc6ae358e64bd02958b587">shutdown</a>() {</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;                    _running = <span class="keyword">false</span>;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                    fc::usleep(fc::seconds(1));</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                    <span class="keywordflow">if</span> (_p2p_network) {</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                        _p2p_network-&gt;close();</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;                        fc::usleep(fc::seconds(1)); <span class="comment">// p2p node has some calls to the database, give it a second to shutdown before invalidating the chain db pointer</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                    }</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                    <span class="keywordflow">if</span> (_chain_db) {</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;                        _chain_db-&gt;close();</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                    }</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                }</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;</div><div class="line"><a name="l00836"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ad47b14adeed0319f84588f503b321247">  836</a></span>&#160;                <a class="code" href="../../de/d5e/classsteemit_1_1app_1_1application.html">application</a> *<a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ad47b14adeed0319f84588f503b321247">_self</a>;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;</div><div class="line"><a name="l00838"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a17f5914ac52fb17ca8475e002dadc23b">  838</a></span>&#160;                fc::path <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a17f5914ac52fb17ca8475e002dadc23b">_data_dir</a>;</div><div class="line"><a name="l00839"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a6a53282ce7a1b0b7d5b015b60769e921">  839</a></span>&#160;                fc::path <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a6a53282ce7a1b0b7d5b015b60769e921">_shared_dir</a>;</div><div class="line"><a name="l00840"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a351e7c7d86bb706e9b6840abb4edad7d">  840</a></span>&#160;                <span class="keyword">const</span> bpo::variables_map *_options = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00841"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ad15e184770aaa20e3286fd6200f0e5cd">  841</a></span>&#160;                <a class="code" href="../../d5/de0/structsteemit_1_1app_1_1api__access.html">api_access</a> <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ad15e184770aaa20e3286fd6200f0e5cd">_apiaccess</a>;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                <span class="comment">//std::shared_ptr&lt;graphene::db::object_database&gt;   _pending_trx_db;</span></div><div class="line"><a name="l00844"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a2f13dc6b6aa67462250ad4b718f3d332">  844</a></span>&#160;                std::shared_ptr&lt;steemit::chain::database&gt; <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a2f13dc6b6aa67462250ad4b718f3d332">_chain_db</a>;</div><div class="line"><a name="l00845"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ac478f9bd86f85c33297e067937794cde">  845</a></span>&#160;                std::shared_ptr&lt;graphene::net::node&gt; <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ac478f9bd86f85c33297e067937794cde">_p2p_network</a>;</div><div class="line"><a name="l00846"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ad056e6107bc5b4e7ace7ec38a2dfc385">  846</a></span>&#160;                std::shared_ptr&lt;fc::http::websocket_server&gt; <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ad056e6107bc5b4e7ace7ec38a2dfc385">_websocket_server</a>;</div><div class="line"><a name="l00847"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#af917a5d69b7e09d7a62f85e18931a064">  847</a></span>&#160;                std::shared_ptr&lt;fc::http::websocket_tls_server&gt; <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#af917a5d69b7e09d7a62f85e18931a064">_websocket_tls_server</a>;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;</div><div class="line"><a name="l00849"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a287718cb03007d51f545565808136c11">  849</a></span>&#160;                std::map&lt;string, std::shared_ptr&lt;abstract_plugin&gt;&gt; <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a287718cb03007d51f545565808136c11">_plugins_available</a>;</div><div class="line"><a name="l00850"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a4127f1edab6894c5faecad3ccf67a740">  850</a></span>&#160;                std::map&lt;string, std::shared_ptr&lt;abstract_plugin&gt;&gt; <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a4127f1edab6894c5faecad3ccf67a740">_plugins_enabled</a>;</div><div class="line"><a name="l00851"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a4682bee987068ffa378c289f06838431">  851</a></span>&#160;                flat_map&lt;std::string, std::function&lt;fc::api_ptr(const api_context &amp;)&gt;&gt; <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a4682bee987068ffa378c289f06838431">_api_factories_by_name</a>;</div><div class="line"><a name="l00852"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#af10a9ec13335244f4e2b6c12afba6a81">  852</a></span>&#160;                std::vector&lt;std::string&gt; <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#af10a9ec13335244f4e2b6c12afba6a81">_public_apis</a>;</div><div class="line"><a name="l00853"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a4ce3d8cf06d5ca0ec4b365fc81beb62b">  853</a></span>&#160;                int32_t _max_block_age = -1;</div><div class="line"><a name="l00854"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a17798605ea8dab16459d1ae4fa1d8bb7">  854</a></span>&#160;                uint64_t <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a17798605ea8dab16459d1ae4fa1d8bb7">_shared_file_size</a>;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;</div><div class="line"><a name="l00856"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ac5d350346743b9a99f37ff2787ac25d8">  856</a></span>&#160;                <span class="keywordtype">bool</span> <a class="code" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ac5d350346743b9a99f37ff2787ac25d8">_running</a>;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;</div><div class="line"><a name="l00858"></a><span class="lineno"><a class="line" href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ae31172abd11c89e090a5a964e0df3fd7">  858</a></span>&#160;                uint32_t allow_future_time = 5;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;            };</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        }</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;</div><div class="line"><a name="l00863"></a><span class="lineno"><a class="line" href="../../de/d5e/classsteemit_1_1app_1_1application.html#ab6eda7ccd905d20adf222f95ccd6132c">  863</a></span>&#160;        <a class="code" href="../../de/d5e/classsteemit_1_1app_1_1application.html#ab6eda7ccd905d20adf222f95ccd6132c">application::application</a>()</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                : my(new detail::application_impl(this)) {</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        }</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;</div><div class="line"><a name="l00867"></a><span class="lineno"><a class="line" href="../../de/d5e/classsteemit_1_1app_1_1application.html#a1534af007972a6d4de027d0164f86288">  867</a></span>&#160;        <a class="code" href="../../de/d5e/classsteemit_1_1app_1_1application.html#a1534af007972a6d4de027d0164f86288">application::~application</a>() {</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;            <span class="keywordflow">if</span> (my-&gt;_p2p_network) {</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;                my-&gt;_p2p_network-&gt;close();</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;                my-&gt;_p2p_network.reset();</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;            }</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;            <span class="keywordflow">if</span> (my-&gt;_chain_db) {</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;                my-&gt;_chain_db-&gt;close();</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;            }</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;            <span class="comment">/*if( my-&gt;_pending_trx_db )</span></div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="comment">            {</span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="comment">               my-&gt;_pending_trx_db-&gt;close();</span></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="comment">            }*/</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        }</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;</div><div class="line"><a name="l00881"></a><span class="lineno"><a class="line" href="../../de/d5e/classsteemit_1_1app_1_1application.html#ab2a6138021461046c969abd40bccdd05">  881</a></span>&#160;        <span class="keywordtype">void</span> <a class="code" href="../../de/d5e/classsteemit_1_1app_1_1application.html#ab2a6138021461046c969abd40bccdd05">application::set_program_options</a>(boost::program_options::options_description &amp;command_line_options,</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;                boost::program_options::options_description &amp;configuration_file_options)<span class="keyword"> const </span>{</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;            std::vector&lt;std::string&gt; default_apis;</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;            default_apis.push_back(<span class="stringliteral">&quot;database_api&quot;</span>);</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;            default_apis.push_back(<span class="stringliteral">&quot;login_api&quot;</span>);</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;            default_apis.push_back(<span class="stringliteral">&quot;account_by_key_api&quot;</span>);</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;            std::string str_default_apis = boost::algorithm::join(default_apis, <span class="stringliteral">&quot; &quot;</span>);</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;            std::vector&lt;std::string&gt; default_plugins;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;            default_plugins.push_back(<span class="stringliteral">&quot;witness&quot;</span>);</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;            default_plugins.push_back(<span class="stringliteral">&quot;account_history&quot;</span>);</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;            default_plugins.push_back(<span class="stringliteral">&quot;account_by_key&quot;</span>);</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;            std::string str_default_plugins = boost::algorithm::join(default_plugins, <span class="stringliteral">&quot; &quot;</span>);</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;            configuration_file_options.add_options()</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                    (<span class="stringliteral">&quot;p2p-endpoint&quot;</span>, bpo::value&lt;string&gt;(), <span class="stringliteral">&quot;Endpoint for P2P node to listen on&quot;</span>)</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;                    (<span class="stringliteral">&quot;p2p-max-connections&quot;</span>, bpo::value&lt;uint32_t&gt;(), <span class="stringliteral">&quot;Maxmimum number of incoming connections on P2P endpoint&quot;</span>)</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;                    (<span class="stringliteral">&quot;seed-node,s&quot;</span>, bpo::value&lt;vector&lt;string&gt;&gt;()-&gt;composing(), <span class="stringliteral">&quot;P2P nodes to connect to on startup (may specify multiple times)&quot;</span>)</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;                    (<span class="stringliteral">&quot;checkpoint,c&quot;</span>, bpo::value&lt;vector&lt;string&gt;&gt;()-&gt;composing(), <span class="stringliteral">&quot;Pairs of [BLOCK_NUM,BLOCK_ID] that should be enforced as checkpoints.&quot;</span>)</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;                    (<span class="stringliteral">&quot;shared-file-dir&quot;</span>, bpo::value&lt;string&gt;(), <span class="stringliteral">&quot;Location of the shared memory file. Defaults to data_dir/blockchain&quot;</span>)</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                    (<span class="stringliteral">&quot;shared-file-size&quot;</span>, bpo::value&lt;string&gt;()-&gt;default_value(<span class="stringliteral">&quot;32G&quot;</span>), <span class="stringliteral">&quot;Size of the shared memory file. Default: 32G&quot;</span>)</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;                    (<span class="stringliteral">&quot;rpc-endpoint&quot;</span>, bpo::value&lt;string&gt;()-&gt;implicit_value(<span class="stringliteral">&quot;127.0.0.1:8090&quot;</span>), <span class="stringliteral">&quot;Endpoint for websocket RPC to listen on&quot;</span>)</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                    (<span class="stringliteral">&quot;rpc-tls-endpoint&quot;</span>, bpo::value&lt;string&gt;()-&gt;implicit_value(<span class="stringliteral">&quot;127.0.0.1:8089&quot;</span>), <span class="stringliteral">&quot;Endpoint for TLS websocket RPC to listen on&quot;</span>)</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                    (<span class="stringliteral">&quot;read-forward-rpc&quot;</span>, bpo::value&lt;string&gt;(), <span class="stringliteral">&quot;Endpoint to forward write API calls to for a read node&quot;</span>)</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                    (<span class="stringliteral">&quot;server-pem,p&quot;</span>, bpo::value&lt;string&gt;()-&gt;implicit_value(<span class="stringliteral">&quot;server.pem&quot;</span>), <span class="stringliteral">&quot;The TLS certificate file for this server&quot;</span>)</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                    (<span class="stringliteral">&quot;server-pem-password,P&quot;</span>, bpo::value&lt;string&gt;()-&gt;implicit_value(<span class="stringliteral">&quot;&quot;</span>), <span class="stringliteral">&quot;Password for this certificate&quot;</span>)</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                    (<span class="stringliteral">&quot;api-user&quot;</span>, bpo::value&lt;vector&lt;string&gt;&gt;()-&gt;composing(), <span class="stringliteral">&quot;API user specification, may be specified multiple times&quot;</span>)</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                    (<span class="stringliteral">&quot;public-api&quot;</span>, bpo::value&lt;vector&lt;string&gt;&gt;()-&gt;composing()-&gt;default_value(default_apis, str_default_apis), <span class="stringliteral">&quot;Set an API to be publicly available, may be specified multiple times&quot;</span>)</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                    (<span class="stringliteral">&quot;enable-plugin&quot;</span>, bpo::value&lt;vector&lt;string&gt;&gt;()-&gt;composing()-&gt;default_value(default_plugins, str_default_plugins), <span class="stringliteral">&quot;Plugin(s) to enable, may be specified multiple times&quot;</span>)</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                    (<span class="stringliteral">&quot;max-block-age&quot;</span>, bpo::value&lt;int32_t&gt;()-&gt;default_value(200), <span class="stringliteral">&quot;Maximum age of head block when broadcasting tx via API&quot;</span>)</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;                    (<span class="stringliteral">&quot;flush&quot;</span>, bpo::value&lt;uint32_t&gt;()-&gt;default_value(100000), <span class="stringliteral">&quot;Flush shared memory file to disk this many blocks&quot;</span>);</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;            command_line_options.add(configuration_file_options);</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;            command_line_options.add_options()</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                    (<span class="stringliteral">&quot;replay-blockchain&quot;</span>, <span class="stringliteral">&quot;Rebuild object graph by replaying all blocks&quot;</span>)</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;                    (<span class="stringliteral">&quot;resync-blockchain&quot;</span>, <span class="stringliteral">&quot;Delete all blocks and re-sync with network from scratch&quot;</span>)</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;                    (<span class="stringliteral">&quot;force-validate&quot;</span>, <span class="stringliteral">&quot;Force validation of all transactions&quot;</span>)</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                    (<span class="stringliteral">&quot;read-only&quot;</span>, <span class="stringliteral">&quot;Node will not connect to p2p network and can only read from the chain state&quot;</span>)</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;                    (<span class="stringliteral">&quot;check-locks&quot;</span>, <span class="stringliteral">&quot;Check correctness of chainbase locking&quot;</span>);</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;            command_line_options.add(_cli_options);</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;            configuration_file_options.add(_cfg_options);</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        }</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;</div><div class="line"><a name="l00923"></a><span class="lineno"><a class="line" href="../../de/d5e/classsteemit_1_1app_1_1application.html#a1b9f0eec92e8d0aaca235555e0c70f9d">  923</a></span>&#160;        <span class="keywordtype">void</span> <a class="code" href="../../de/d5e/classsteemit_1_1app_1_1application.html#a1b9f0eec92e8d0aaca235555e0c70f9d">application::initialize</a>(<span class="keyword">const</span> fc::path &amp;data_dir, <span class="keyword">const</span> boost::program_options::variables_map &amp;options) {</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;            my-&gt;_data_dir = data_dir;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;            my-&gt;_options = &amp;options;</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        }</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;</div><div class="line"><a name="l00928"></a><span class="lineno"><a class="line" href="../../de/d5e/classsteemit_1_1app_1_1application.html#a3c57913f43e1c924e0ec55591230a29d">  928</a></span>&#160;        <span class="keywordtype">void</span> <a class="code" href="../../de/d5e/classsteemit_1_1app_1_1application.html#a3c57913f43e1c924e0ec55591230a29d">application::startup</a>() {</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;            <span class="keywordflow">try</span> {</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;                my-&gt;startup();</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;            } <span class="keywordflow">catch</span> (<span class="keyword">const</span> fc::exception &amp;e) {</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;                elog(<span class="stringliteral">&quot;${e}&quot;</span>, (<span class="stringliteral">&quot;e&quot;</span>, e.to_detail_string()));</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;                <span class="keywordflow">throw</span>;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;            } <span class="keywordflow">catch</span> (...) {</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                elog(<span class="stringliteral">&quot;unexpected exception&quot;</span>);</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                <span class="keywordflow">throw</span>;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;            }</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        }</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;</div><div class="line"><a name="l00940"></a><span class="lineno"><a class="line" href="../../de/d5e/classsteemit_1_1app_1_1application.html#a1da5a8befb15550f4e2a81c4f35575a2">  940</a></span>&#160;        std::shared_ptr&lt;abstract_plugin&gt; <a class="code" href="../../de/d5e/classsteemit_1_1app_1_1application.html#a1da5a8befb15550f4e2a81c4f35575a2">application::get_plugin</a>(<span class="keyword">const</span> <span class="keywordtype">string</span> &amp;name)<span class="keyword"> const </span>{</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;            <span class="keywordflow">try</span> {</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;                <span class="keywordflow">return</span> my-&gt;_plugins_enabled.at(name);</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;            }</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;            <span class="keywordflow">catch</span> (...) {</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;            }</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;            <span class="keywordflow">return</span> null_plugin;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        }</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;</div><div class="line"><a name="l00950"></a><span class="lineno"><a class="line" href="../../de/d5e/classsteemit_1_1app_1_1application.html#acc41e87bd4153cd584fd04ff67e37c8f">  950</a></span>&#160;        graphene::net::node_ptr <a class="code" href="../../de/d5e/classsteemit_1_1app_1_1application.html#acc41e87bd4153cd584fd04ff67e37c8f">application::p2p_node</a>() {</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;            <span class="keywordflow">return</span> my-&gt;_p2p_network;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        }</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;</div><div class="line"><a name="l00954"></a><span class="lineno"><a class="line" href="../../de/d5e/classsteemit_1_1app_1_1application.html#a53844f3fea748dbfdd9e939d73ccdd86">  954</a></span>&#160;        std::shared_ptr&lt;chain::database&gt; <a class="code" href="../../de/d5e/classsteemit_1_1app_1_1application.html#a53844f3fea748dbfdd9e939d73ccdd86">application::chain_database</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;            <span class="keywordflow">return</span> my-&gt;_chain_db;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;        }</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="comment">/*std::shared_ptr&lt;graphene::db::object_database&gt; application::pending_trx_database() const</span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="comment">{</span></div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="comment">   return my-&gt;_pending_trx_db;</span></div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="comment">}*/</span></div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;</div><div class="line"><a name="l00963"></a><span class="lineno"><a class="line" href="../../de/d5e/classsteemit_1_1app_1_1application.html#affd34dee00334d74c17c6df042803a36">  963</a></span>&#160;        <span class="keywordtype">void</span> <a class="code" href="../../de/d5e/classsteemit_1_1app_1_1application.html#affd34dee00334d74c17c6df042803a36">application::set_block_production</a>(<span class="keywordtype">bool</span> producing_blocks) {</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;            my-&gt;_is_block_producer = producing_blocks;</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        }</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;</div><div class="line"><a name="l00967"></a><span class="lineno"><a class="line" href="../../de/d5e/classsteemit_1_1app_1_1application.html#a0633e1c5e906772f4e1762b18e7103da">  967</a></span>&#160;        optional&lt;api_access_info&gt; <a class="code" href="../../de/d5e/classsteemit_1_1app_1_1application.html#a0633e1c5e906772f4e1762b18e7103da">application::get_api_access_info</a>(<span class="keyword">const</span> <span class="keywordtype">string</span> &amp;username)<span class="keyword"> const </span>{</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;            <span class="keywordflow">return</span> my-&gt;get_api_access_info(username);</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;        }</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;</div><div class="line"><a name="l00971"></a><span class="lineno"><a class="line" href="../../de/d5e/classsteemit_1_1app_1_1application.html#ace8dff52415ee1b13a8402fcaa9978b0">  971</a></span>&#160;        <span class="keywordtype">void</span> <a class="code" href="../../de/d5e/classsteemit_1_1app_1_1application.html#ace8dff52415ee1b13a8402fcaa9978b0">application::set_api_access_info</a>(<span class="keyword">const</span> <span class="keywordtype">string</span> &amp;username, <a class="code" href="../../df/df9/structsteemit_1_1app_1_1api__access__info.html">api_access_info</a> &amp;&amp;permissions) {</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;            my-&gt;set_api_access_info(username, std::move(permissions));</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;        }</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;</div><div class="line"><a name="l00975"></a><span class="lineno"><a class="line" href="../../de/d5e/classsteemit_1_1app_1_1application.html#a9765c77e309c9f2a0469fa7981295690">  975</a></span>&#160;        <span class="keywordtype">void</span> <a class="code" href="../../de/d5e/classsteemit_1_1app_1_1application.html#a9765c77e309c9f2a0469fa7981295690">application::register_api_factory</a>(<span class="keyword">const</span> <span class="keywordtype">string</span> &amp;name, std::function&lt;fc::api_ptr(<span class="keyword">const</span> <a class="code" href="../../d1/d23/structsteemit_1_1app_1_1api__context.html">api_context</a> &amp;)&gt; factory) {</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;            <span class="keywordflow">return</span> my-&gt;register_api_factory(name, factory);</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;        }</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;</div><div class="line"><a name="l00979"></a><span class="lineno"><a class="line" href="../../de/d5e/classsteemit_1_1app_1_1application.html#ae1562706967e6af658970c5d0b65a7a9">  979</a></span>&#160;        fc::api_ptr <a class="code" href="../../de/d5e/classsteemit_1_1app_1_1application.html#ae1562706967e6af658970c5d0b65a7a9">application::create_api_by_name</a>(<span class="keyword">const</span> <a class="code" href="../../d1/d23/structsteemit_1_1app_1_1api__context.html">api_context</a> &amp;ctx) {</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;            <span class="keywordflow">return</span> my-&gt;create_api_by_name(ctx);</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;        }</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;</div><div class="line"><a name="l00983"></a><span class="lineno"><a class="line" href="../../de/d5e/classsteemit_1_1app_1_1application.html#a91bcf9a4a21b81e48363a0b63d985d8e">  983</a></span>&#160;        <span class="keywordtype">void</span> <a class="code" href="../../de/d5e/classsteemit_1_1app_1_1application.html#a91bcf9a4a21b81e48363a0b63d985d8e">application::get_max_block_age</a>(int32_t &amp;result) {</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;            my-&gt;get_max_block_age(result);</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;        }</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;</div><div class="line"><a name="l00987"></a><span class="lineno"><a class="line" href="../../de/d5e/classsteemit_1_1app_1_1application.html#aada297ad95d44f0cc521ffc0acafc7b4">  987</a></span>&#160;        <span class="keywordtype">void</span> <a class="code" href="../../de/d5e/classsteemit_1_1app_1_1application.html#aada297ad95d44f0cc521ffc0acafc7b4">application::shutdown_plugins</a>() {</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;entry : my-&gt;_plugins_enabled) {</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;                entry.second-&gt;plugin_shutdown();</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;            }</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        }</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;</div><div class="line"><a name="l00994"></a><span class="lineno"><a class="line" href="../../de/d5e/classsteemit_1_1app_1_1application.html#a7d94637ab56e4a37e277098e6064fa31">  994</a></span>&#160;        <span class="keywordtype">void</span> <a class="code" href="../../de/d5e/classsteemit_1_1app_1_1application.html#a7d94637ab56e4a37e277098e6064fa31">application::shutdown</a>() {</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;            my-&gt;shutdown();</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        }</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;</div><div class="line"><a name="l00998"></a><span class="lineno"><a class="line" href="../../de/d5e/classsteemit_1_1app_1_1application.html#a585c9a19e4c82aefd4d0419c8fc79849">  998</a></span>&#160;        <span class="keywordtype">void</span> <a class="code" href="../../de/d5e/classsteemit_1_1app_1_1application.html#a585c9a19e4c82aefd4d0419c8fc79849">application::register_abstract_plugin</a>(std::shared_ptr&lt;abstract_plugin&gt; plug) {</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;            boost::program_options::options_description plugin_cli_options(</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                    <span class="stringliteral">&quot;Options for plugin &quot;</span> +</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;                    plug-&gt;plugin_name()), plugin_cfg_options;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;            plug-&gt;plugin_set_program_options(plugin_cli_options, plugin_cfg_options);</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;            <span class="keywordflow">if</span> (!plugin_cli_options.options().empty()) {</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;                _cli_options.add(plugin_cli_options);</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;            }</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;            <span class="keywordflow">if</span> (!plugin_cfg_options.options().empty()) {</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;                _cfg_options.add(plugin_cfg_options);</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;            }</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;            my-&gt;_plugins_available[plug-&gt;plugin_name()] = plug;</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        }</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;</div><div class="line"><a name="l01013"></a><span class="lineno"><a class="line" href="../../de/d5e/classsteemit_1_1app_1_1application.html#a2393dc839e3ed526cb48d522b9d11478"> 1013</a></span>&#160;        <span class="keywordtype">void</span> <a class="code" href="../../de/d5e/classsteemit_1_1app_1_1application.html#a2393dc839e3ed526cb48d522b9d11478">application::enable_plugin</a>(<span class="keyword">const</span> std::string &amp;name) {</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;            <span class="keyword">auto</span> it = my-&gt;_plugins_available.find(name);</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;            <span class="keywordflow">if</span> (it == my-&gt;_plugins_available.end()) {</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;                elog(<span class="stringliteral">&quot;can&#39;t enable plugin ${name}&quot;</span>, (<span class="stringliteral">&quot;name&quot;</span>, name));</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;            }</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;            FC_ASSERT(it != my-&gt;_plugins_available.end());</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;            my-&gt;_plugins_enabled[name] = it-&gt;second;</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;        }</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;</div><div class="line"><a name="l01022"></a><span class="lineno"><a class="line" href="../../de/d5e/classsteemit_1_1app_1_1application.html#aae00cad21a96a7257f02115e81dce01a"> 1022</a></span>&#160;        <span class="keywordtype">void</span> <a class="code" href="../../de/d5e/classsteemit_1_1app_1_1application.html#aae00cad21a96a7257f02115e81dce01a">application::initialize_plugins</a>(<span class="keyword">const</span> boost::program_options::variables_map &amp;options) {</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;            <span class="keywordflow">if</span> (options.count(<span class="stringliteral">&quot;enable-plugin&quot;</span>) &gt; 0) {</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;                <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;arg : options.at(<span class="stringliteral">&quot;enable-plugin&quot;</span>).as&lt;std::vector&lt;std::string&gt;&gt;()) {</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;                    vector&lt;string&gt; names;</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;                    boost::split(names, arg, boost::is_any_of(<span class="stringliteral">&quot; \t,&quot;</span>));</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;                    <span class="keywordflow">for</span> (<span class="keyword">const</span> std::string &amp;name : names) {</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;                        <a class="code" href="../../de/d5e/classsteemit_1_1app_1_1application.html#a2393dc839e3ed526cb48d522b9d11478">enable_plugin</a>(name);</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;                    }</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;                }</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;            }</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;entry : my-&gt;_plugins_enabled) {</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;                ilog(<span class="stringliteral">&quot;Initializing plugin ${name}&quot;</span>, (<span class="stringliteral">&quot;name&quot;</span>, entry.first));</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;                entry.second-&gt;plugin_initialize(options);</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;            }</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;        }</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;</div><div class="line"><a name="l01039"></a><span class="lineno"><a class="line" href="../../de/d5e/classsteemit_1_1app_1_1application.html#a191c11ceeb9370d529a114d818f55b4f"> 1039</a></span>&#160;        <span class="keywordtype">void</span> <a class="code" href="../../de/d5e/classsteemit_1_1app_1_1application.html#a191c11ceeb9370d529a114d818f55b4f">application::startup_plugins</a>() {</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;entry : my-&gt;_plugins_enabled) {</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;                entry.second-&gt;plugin_startup();</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;            }</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;        }</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;<span class="comment">// namespace detail</span></div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    }</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;}</div><div class="ttc" id="classsteemit_1_1chain_1_1database_html_afd81b7d9bc2099fda77544ddc53f9dc5addc8b88d20727cbd0fc4a1b37e2cc4ed"><div class="ttname"><a href="../../da/d98/classsteemit_1_1chain_1_1database.html#afd81b7d9bc2099fda77544ddc53f9dc5addc8b88d20727cbd0fc4a1b37e2cc4ed">steemit::chain::database::skip_nothing</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/da2/database_8hpp_source.html#l00060">database.hpp:60</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_a202f56ac00a3a49a635a7615f9da071f"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a202f56ac00a3a49a635a7615f9da071f">steemit::app::detail::application_impl::get_max_block_age</a></div><div class="ttdeci">void get_max_block_age(int32_t &amp;result)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00819">application.cpp:819</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_a4127f1edab6894c5faecad3ccf67a740"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a4127f1edab6894c5faecad3ccf67a740">steemit::app::detail::application_impl::_plugins_enabled</a></div><div class="ttdeci">std::map&lt; string, std::shared_ptr&lt; abstract_plugin &gt; &gt; _plugins_enabled</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00850">application.cpp:850</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_a841d65fc5999ef6569bf651062e60032"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a841d65fc5999ef6569bf651062e60032">steemit::app::detail::application_impl::reset_p2p_node</a></div><div class="ttdeci">void reset_p2p_node(const fc::path &amp;data_dir)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00075">application.cpp:75</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_a8b1a9300dfea908827c69eb160e3b88d"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a8b1a9300dfea908827c69eb160e3b88d">steemit::app::detail::application_impl::get_blockchain_now</a></div><div class="ttdeci">virtual fc::time_point_sec get_blockchain_now() override</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00803">application.cpp:803</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_a574c4d44e79bac626423a648dcf076be"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a574c4d44e79bac626423a648dcf076be">steemit::app::detail::application_impl::error_encountered</a></div><div class="ttdeci">virtual void error_encountered(const std::string &amp;message, const fc::oexception &amp;error) override</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00815">application.cpp:815</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_a287718cb03007d51f545565808136c11"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a287718cb03007d51f545565808136c11">steemit::app::detail::application_impl::_plugins_available</a></div><div class="ttdeci">std::map&lt; string, std::shared_ptr&lt; abstract_plugin &gt; &gt; _plugins_available</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00849">application.cpp:849</a></div></div>
<div class="ttc" id="structsteemit_1_1app_1_1api__context_html"><div class="ttname"><a href="../../d1/d23/structsteemit_1_1app_1_1api__context.html">steemit::app::api_context</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d64/api__context_8hpp_source.html#l00036">api_context.hpp:36</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1network__node__api_html"><div class="ttname"><a href="../../d6/d4b/classsteemit_1_1app_1_1network__node__api.html">steemit::app::network_node_api</a></div><div class="ttdoc">The network_node_api class allows maintenance of p2p connections. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/df0/api_8hpp_source.html#l00129">api.hpp:129</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_a5f85b572adcf23a26968afe05e08628f"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a5f85b572adcf23a26968afe05e08628f">steemit::app::detail::application_impl::has_item</a></div><div class="ttdeci">virtual bool has_item(const graphene::net::item_id &amp;id) override</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00389">application.cpp:389</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1application_html_a585c9a19e4c82aefd4d0419c8fc79849"><div class="ttname"><a href="../../de/d5e/classsteemit_1_1app_1_1application.html#a585c9a19e4c82aefd4d0419c8fc79849">steemit::app::application::register_abstract_plugin</a></div><div class="ttdeci">void register_abstract_plugin(std::shared_ptr&lt; abstract_plugin &gt; plug)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00998">application.cpp:998</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_a4312058c7c8f0631de73b5fe4c3a6f91"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a4312058c7c8f0631de73b5fe4c3a6f91">steemit::app::detail::application_impl::application_impl</a></div><div class="ttdeci">application_impl(application *self)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00212">application.cpp:212</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1login__api_html"><div class="ttname"><a href="../../d3/df0/classsteemit_1_1app_1_1login__api.html">steemit::app::login_api</a></div><div class="ttdoc">The login_api class implements the bottom layer of the RPC API. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/df0/api_8hpp_source.html#l00193">api.hpp:193</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_a2f13dc6b6aa67462250ad4b718f3d332"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a2f13dc6b6aa67462250ad4b718f3d332">steemit::app::detail::application_impl::_chain_db</a></div><div class="ttdeci">std::shared_ptr&lt; steemit::chain::database &gt; _chain_db</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00844">application.cpp:844</a></div></div>
<div class="ttc" id="structsteemit_1_1app_1_1api__access_html"><div class="ttname"><a href="../../d5/de0/structsteemit_1_1app_1_1api__access.html">steemit::app::api_access</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d81/api__access_8hpp_source.html#l00042">api_access.hpp:42</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_aefd56a9ef9fcb4d2b09c0b90c9918514"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#aefd56a9ef9fcb4d2b09c0b90c9918514">steemit::app::detail::application_impl::resolve_string_to_ip_endpoints</a></div><div class="ttdeci">std::vector&lt; fc::ip::endpoint &gt; resolve_string_to_ip_endpoints(const std::string &amp;endpoint_string)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00127">application.cpp:127</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_ad598f55cec78f2fbf65a27288a49556a"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ad598f55cec78f2fbf65a27288a49556a">steemit::app::detail::application_impl::get_head_block_id</a></div><div class="ttdeci">virtual item_hash_t get_head_block_id() const override</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00807">application.cpp:807</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_ad9253c72bbf051eacedb609f6981e17d"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ad9253c72bbf051eacedb609f6981e17d">steemit::app::detail::application_impl::~application_impl</a></div><div class="ttdeci">~application_impl()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00218">application.cpp:218</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_ac478f9bd86f85c33297e067937794cde"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ac478f9bd86f85c33297e067937794cde">steemit::app::detail::application_impl::_p2p_network</a></div><div class="ttdeci">std::shared_ptr&lt; graphene::net::node &gt; _p2p_network</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00845">application.cpp:845</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1application_html_aae00cad21a96a7257f02115e81dce01a"><div class="ttname"><a href="../../de/d5e/classsteemit_1_1app_1_1application.html#aae00cad21a96a7257f02115e81dce01a">steemit::app::application::initialize_plugins</a></div><div class="ttdeci">void initialize_plugins(const boost::program_options::variables_map &amp;options)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l01022">application.cpp:1022</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_af0f4da8df1b36f849ac4bae88b34ff72"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#af0f4da8df1b36f849ac4bae88b34ff72">steemit::app::detail::application_impl::estimate_last_known_fork_from_git_revision_timestamp</a></div><div class="ttdeci">virtual uint32_t estimate_last_known_fork_from_git_revision_timestamp(uint32_t unix_timestamp) const override</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00811">application.cpp:811</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_a378fa27c56fc6ae358e64bd02958b587"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a378fa27c56fc6ae358e64bd02958b587">steemit::app::detail::application_impl::shutdown</a></div><div class="ttdeci">void shutdown()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00824">application.cpp:824</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1application_html_a3c57913f43e1c924e0ec55591230a29d"><div class="ttname"><a href="../../de/d5e/classsteemit_1_1app_1_1application.html#a3c57913f43e1c924e0ec55591230a29d">steemit::app::application::startup</a></div><div class="ttdeci">void startup()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00928">application.cpp:928</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_ae8b30d90fca5ece635d932cb81e9afe5"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ae8b30d90fca5ece635d932cb81e9afe5">steemit::app::detail::application_impl::get_block_ids</a></div><div class="ttdeci">virtual std::vector&lt; item_hash_t &gt; get_block_ids(const std::vector&lt; item_hash_t &gt; &amp;blockchain_synopsis, uint32_t &amp;remaining_item_count, uint32_t limit) override</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00511">application.cpp:511</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1application_html_acc41e87bd4153cd584fd04ff67e37c8f"><div class="ttname"><a href="../../de/d5e/classsteemit_1_1app_1_1application.html#acc41e87bd4153cd584fd04ff67e37c8f">steemit::app::application::p2p_node</a></div><div class="ttdeci">graphene::net::node_ptr p2p_node()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00950">application.cpp:950</a></div></div>
<div class="ttc" id="classsteemit_1_1chain_1_1database_html_afd81b7d9bc2099fda77544ddc53f9dc5a25ee59e2966d45e3c4a6e2c2c6775302"><div class="ttname"><a href="../../da/d98/classsteemit_1_1chain_1_1database.html#afd81b7d9bc2099fda77544ddc53f9dc5a25ee59e2966d45e3c4a6e2c2c6775302">steemit::chain::database::skip_transaction_signatures</a></div><div class="ttdoc">used by non-witness nodes </div><div class="ttdef"><b>Definition:</b> <a href="../../df/da2/database_8hpp_source.html#l00062">database.hpp:62</a></div></div>
<div class="ttc" id="namespacestd_html"><div class="ttname"><a href="../../d8/dcc/namespacestd.html">std</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1application_html_ace8dff52415ee1b13a8402fcaa9978b0"><div class="ttname"><a href="../../de/d5e/classsteemit_1_1app_1_1application.html#ace8dff52415ee1b13a8402fcaa9978b0">steemit::app::application::set_api_access_info</a></div><div class="ttdeci">void set_api_access_info(const string &amp;username, api_access_info &amp;&amp;permissions)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00971">application.cpp:971</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_a4ae0d3841eb29ecbf8f77459a65e2257"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a4ae0d3841eb29ecbf8f77459a65e2257">steemit::app::detail::application_impl::get_block_time</a></div><div class="ttdeci">virtual fc::time_point_sec get_block_time(const item_hash_t &amp;block_id) override</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00792">application.cpp:792</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1application_html_a191c11ceeb9370d529a114d818f55b4f"><div class="ttname"><a href="../../de/d5e/classsteemit_1_1app_1_1application.html#a191c11ceeb9370d529a114d818f55b4f">steemit::app::application::startup_plugins</a></div><div class="ttdeci">void startup_plugins()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l01039">application.cpp:1039</a></div></div>
<div class="ttc" id="structsteemit_1_1app_1_1api__access__info_html"><div class="ttname"><a href="../../df/df9/structsteemit_1_1app_1_1api__access__info.html">steemit::app::api_access_info</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d81/api__access_8hpp_source.html#l00035">api_access.hpp:35</a></div></div>
<div class="ttc" id="structsteemit_1_1app_1_1api__context_html_adb62c0f23b72c9e95fe623369af944ac"><div class="ttname"><a href="../../d1/d23/structsteemit_1_1app_1_1api__context.html#adb62c0f23b72c9e95fe623369af944ac">steemit::app::api_context::api_context</a></div><div class="ttdeci">api_context(application &amp;_app, const std::string &amp;_api_name, std::weak_ptr&lt; api_session_data &gt; _session)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00063">application.cpp:63</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_a9e3240ac0577124af7bb863a81507d76"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a9e3240ac0577124af7bb863a81507d76">steemit::app::detail::application_impl::handle_message</a></div><div class="ttdeci">virtual void handle_message(const message &amp;message_to_process) override</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00491">application.cpp:491</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_ad3da61169da155185dfd9a2e302b2b79"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ad3da61169da155185dfd9a2e302b2b79">steemit::app::detail::application_impl::handle_transaction</a></div><div class="ttdeci">virtual void handle_transaction(const graphene::net::trx_message &amp;transaction_message) override</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00483">application.cpp:483</a></div></div>
<div class="ttc" id="api_8hpp_html"><div class="ttname"><a href="../../d4/df0/api_8hpp.html">api.hpp</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1application_html_ab2a6138021461046c969abd40bccdd05"><div class="ttname"><a href="../../de/d5e/classsteemit_1_1app_1_1application.html#ab2a6138021461046c969abd40bccdd05">steemit::app::application::set_program_options</a></div><div class="ttdeci">void set_program_options(boost::program_options::options_description &amp;command_line_options, boost::program_options::options_description &amp;configuration_file_options) const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00881">application.cpp:881</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_afb51c055f517a0ad44d744473db030ae"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#afb51c055f517a0ad44d744473db030ae">steemit::app::detail::application_impl::reset_websocket_tls_server</a></div><div class="ttdeci">void reset_websocket_tls_server()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00170">application.cpp:170</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_aaaa1ff832e0b86a447e6cfaacbf2ec66"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#aaaa1ff832e0b86a447e6cfaacbf2ec66">steemit::app::detail::application_impl::connection_count_changed</a></div><div class="ttdeci">virtual void connection_count_changed(uint32_t c) override</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00778">application.cpp:778</a></div></div>
<div class="ttc" id="structsteemit_1_1app_1_1api__access__info_html_a516b6eaa118c3efdc6e01a2eeb3acfe4"><div class="ttname"><a href="../../df/df9/structsteemit_1_1app_1_1api__access__info.html#a516b6eaa118c3efdc6e01a2eeb3acfe4">steemit::app::api_access_info::password_salt_b64</a></div><div class="ttdeci">std::string password_salt_b64</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d81/api__access_8hpp_source.html#l00038">api_access.hpp:38</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_a42d0757e6ff0fb4b4ba51bfba853d960"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a42d0757e6ff0fb4b4ba51bfba853d960">steemit::app::detail::application_impl::handle_block</a></div><div class="ttdeci">virtual bool handle_block(const graphene::net::block_message &amp;blk_msg, bool sync_mode, std::vector&lt; fc::uint160_t &gt; &amp;contained_transaction_message_ids) override</div><div class="ttdoc">allows the application to validate an item prior to broadcasting to peers. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00413">application.cpp:413</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_afdaf7e18985e8dd81a1c2b360f662156"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#afdaf7e18985e8dd81a1c2b360f662156">steemit::app::detail::application_impl::get_api_access_info</a></div><div class="ttdeci">optional&lt; api_access_info &gt; get_api_access_info(const string &amp;username) const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00357">application.cpp:357</a></div></div>
<div class="ttc" id="structsteemit_1_1app_1_1api__access__info_html_a257a7346f767be5d61ea8ca8c04c03b6"><div class="ttname"><a href="../../df/df9/structsteemit_1_1app_1_1api__access__info.html#a257a7346f767be5d61ea8ca8c04c03b6">steemit::app::api_access_info::allowed_apis</a></div><div class="ttdeci">std::vector&lt; std::string &gt; allowed_apis</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d81/api__access_8hpp_source.html#l00039">api_access.hpp:39</a></div></div>
<div class="ttc" id="structsteemit_1_1app_1_1api__access__info_html_a228de90427c5a9c3b2d2e63f8b3c153c"><div class="ttname"><a href="../../df/df9/structsteemit_1_1app_1_1api__access__info.html#a228de90427c5a9c3b2d2e63f8b3c153c">steemit::app::api_access_info::password_hash_b64</a></div><div class="ttdeci">std::string password_hash_b64</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d81/api__access_8hpp_source.html#l00037">api_access.hpp:37</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_a52ea2173abc396d98017d5e933226e80"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a52ea2173abc396d98017d5e933226e80">steemit::app::detail::application_impl::get_item</a></div><div class="ttdeci">virtual message get_item(const item_id &amp;id) override</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00569">application.cpp:569</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_af10a9ec13335244f4e2b6c12afba6a81"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#af10a9ec13335244f4e2b6c12afba6a81">steemit::app::detail::application_impl::_public_apis</a></div><div class="ttdeci">std::vector&lt; std::string &gt; _public_apis</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00852">application.cpp:852</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1application_html_a9765c77e309c9f2a0469fa7981295690"><div class="ttname"><a href="../../de/d5e/classsteemit_1_1app_1_1application.html#a9765c77e309c9f2a0469fa7981295690">steemit::app::application::register_api_factory</a></div><div class="ttdeci">void register_api_factory(const string &amp;name, std::function&lt; fc::api_ptr(const api_context &amp;)&gt; factory)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00975">application.cpp:975</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_ad47b14adeed0319f84588f503b321247"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ad47b14adeed0319f84588f503b321247">steemit::app::detail::application_impl::_self</a></div><div class="ttdeci">application * _self</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00836">application.cpp:836</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_ac39432b8121c265ff56cf6fdebb6a267"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ac39432b8121c265ff56cf6fdebb6a267">steemit::app::detail::application_impl::get_block_number</a></div><div class="ttdeci">virtual uint32_t get_block_number(const item_hash_t &amp;block_id) override</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00782">application.cpp:782</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_a6a53282ce7a1b0b7d5b015b60769e921"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a6a53282ce7a1b0b7d5b015b60769e921">steemit::app::detail::application_impl::_shared_dir</a></div><div class="ttdeci">fc::path _shared_dir</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00839">application.cpp:839</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1application_html_aada297ad95d44f0cc521ffc0acafc7b4"><div class="ttname"><a href="../../de/d5e/classsteemit_1_1app_1_1application.html#aada297ad95d44f0cc521ffc0acafc7b4">steemit::app::application::shutdown_plugins</a></div><div class="ttdeci">void shutdown_plugins()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00987">application.cpp:987</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1application_html_a1534af007972a6d4de027d0164f86288"><div class="ttname"><a href="../../de/d5e/classsteemit_1_1app_1_1application.html#a1534af007972a6d4de027d0164f86288">steemit::app::application::~application</a></div><div class="ttdeci">~application()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00867">application.cpp:867</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1application_html_ae1562706967e6af658970c5d0b65a7a9"><div class="ttname"><a href="../../de/d5e/classsteemit_1_1app_1_1application.html#ae1562706967e6af658970c5d0b65a7a9">steemit::app::application::create_api_by_name</a></div><div class="ttdeci">fc::api_ptr create_api_by_name(const api_context &amp;ctx)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00979">application.cpp:979</a></div></div>
<div class="ttc" id="classsteemit_1_1chain_1_1database_html"><div class="ttname"><a href="../../da/d98/classsteemit_1_1chain_1_1database.html">steemit::chain::database</a></div><div class="ttdoc">tracks the blockchain state in an extensible manner </div><div class="ttdef"><b>Definition:</b> <a href="../../df/da2/database_8hpp_source.html#l00041">database.hpp:41</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1login__api_html_ad3ba91ac4eba18a27a1aaacbf787fb1c"><div class="ttname"><a href="../../d3/df0/classsteemit_1_1app_1_1login__api.html#ad3ba91ac4eba18a27a1aaacbf787fb1c">steemit::app::login_api::get_api_by_name</a></div><div class="ttdeci">fc::api_ptr get_api_by_name(const string &amp;api_name) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d48/api_8cpp_source.html#l00089">api.cpp:89</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_ad15e184770aaa20e3286fd6200f0e5cd"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ad15e184770aaa20e3286fd6200f0e5cd">steemit::app::detail::application_impl::_apiaccess</a></div><div class="ttdeci">api_access _apiaccess</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00841">application.cpp:841</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_a371b86112f200e65c18a492dc6afe1bd"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a371b86112f200e65c18a492dc6afe1bd">steemit::app::detail::application_impl::on_connection</a></div><div class="ttdeci">void on_connection(const fc::http::websocket_connection_ptr &amp;c)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00195">application.cpp:195</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1application_html_a7d94637ab56e4a37e277098e6064fa31"><div class="ttname"><a href="../../de/d5e/classsteemit_1_1app_1_1application.html#a7d94637ab56e4a37e277098e6064fa31">steemit::app::application::shutdown</a></div><div class="ttdeci">void shutdown()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00994">application.cpp:994</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_ac8283494f835a3fd535052eaed3ce692"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ac8283494f835a3fd535052eaed3ce692">steemit::app::detail::application_impl::set_api_access_info</a></div><div class="ttdeci">void set_api_access_info(const string &amp;username, api_access_info &amp;&amp;permissions)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00369">application.cpp:369</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_af917a5d69b7e09d7a62f85e18931a064"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#af917a5d69b7e09d7a62f85e18931a064">steemit::app::detail::application_impl::_websocket_tls_server</a></div><div class="ttdeci">std::shared_ptr&lt; fc::http::websocket_tls_server &gt; _websocket_tls_server</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00847">application.cpp:847</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1application_html_affd34dee00334d74c17c6df042803a36"><div class="ttname"><a href="../../de/d5e/classsteemit_1_1app_1_1application.html#affd34dee00334d74c17c6df042803a36">steemit::app::application::set_block_production</a></div><div class="ttdeci">void set_block_production(bool producing_blocks)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00963">application.cpp:963</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_a45045ad57a849fcf180e4c5a6f58743d"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a45045ad57a849fcf180e4c5a6f58743d">steemit::app::detail::application_impl::startup</a></div><div class="ttdeci">void startup()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00228">application.cpp:228</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_ac419c9f3f96b5e518a8d1bc25a302b19"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ac419c9f3f96b5e518a8d1bc25a302b19">steemit::app::detail::application_impl::create_api_by_name</a></div><div class="ttdeci">fc::api_ptr create_api_by_name(const api_context &amp;ctx)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00377">application.cpp:377</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1application_html"><div class="ttname"><a href="../../de/d5e/classsteemit_1_1app_1_1application.html">steemit::app::application</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d01/application_8hpp_source.html#l00053">application.hpp:53</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_a8a2427dd60af853be10f7d0b12093197"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a8a2427dd60af853be10f7d0b12093197">steemit::app::detail::application_impl::register_builtin_apis</a></div><div class="ttdeci">void register_builtin_apis()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00221">application.cpp:221</a></div></div>
<div class="ttc" id="database__exceptions_8hpp_html"><div class="ttname"><a href="../../da/dc1/database__exceptions_8hpp.html">database_exceptions.hpp</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1application_html_a91bcf9a4a21b81e48363a0b63d985d8e"><div class="ttname"><a href="../../de/d5e/classsteemit_1_1app_1_1application.html#a91bcf9a4a21b81e48363a0b63d985d8e">steemit::app::application::get_max_block_age</a></div><div class="ttdeci">void get_max_block_age(int32_t &amp;result)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00983">application.cpp:983</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_ad056e6107bc5b4e7ace7ec38a2dfc385"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ad056e6107bc5b4e7ace7ec38a2dfc385">steemit::app::detail::application_impl::_websocket_server</a></div><div class="ttdeci">std::shared_ptr&lt; fc::http::websocket_server &gt; _websocket_server</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00846">application.cpp:846</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_a17f5914ac52fb17ca8475e002dadc23b"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a17f5914ac52fb17ca8475e002dadc23b">steemit::app::detail::application_impl::_data_dir</a></div><div class="ttdeci">fc::path _data_dir</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00838">application.cpp:838</a></div></div>
<div class="ttc" id="structsteemit_1_1app_1_1api__access__info_html_a1cab99d18e883cf8509e3046b53dd3fa"><div class="ttname"><a href="../../df/df9/structsteemit_1_1app_1_1api__access__info.html#a1cab99d18e883cf8509e3046b53dd3fa">steemit::app::api_access_info::username</a></div><div class="ttdeci">std::string username</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d81/api__access_8hpp_source.html#l00036">api_access.hpp:36</a></div></div>
<div class="ttc" id="structsteemit_1_1app_1_1api__context_html_a9adb72ff067cb73e3f1933cff2c08dd4"><div class="ttname"><a href="../../d1/d23/structsteemit_1_1app_1_1api__context.html#a9adb72ff067cb73e3f1933cff2c08dd4">steemit::app::api_context::api_name</a></div><div class="ttdeci">std::string api_name</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d64/api__context_8hpp_source.html#l00040">api_context.hpp:40</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1application_html_ab6eda7ccd905d20adf222f95ccd6132c"><div class="ttname"><a href="../../de/d5e/classsteemit_1_1app_1_1application.html#ab6eda7ccd905d20adf222f95ccd6132c">steemit::app::application::application</a></div><div class="ttdeci">application()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00863">application.cpp:863</a></div></div>
<div class="ttc" id="structsteemit_1_1app_1_1api__context_html_a71a38f962c4c89a7d14aae81970e3749"><div class="ttname"><a href="../../d1/d23/structsteemit_1_1app_1_1api__context.html#a71a38f962c4c89a7d14aae81970e3749">steemit::app::api_context::session</a></div><div class="ttdeci">std::weak_ptr&lt; api_session_data &gt; session</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d64/api__context_8hpp_source.html#l00041">api_context.hpp:41</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1application_html_a1da5a8befb15550f4e2a81c4f35575a2"><div class="ttname"><a href="../../de/d5e/classsteemit_1_1app_1_1application.html#a1da5a8befb15550f4e2a81c4f35575a2">steemit::app::application::get_plugin</a></div><div class="ttdeci">std::shared_ptr&lt; abstract_plugin &gt; get_plugin(const string &amp;name) const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00940">application.cpp:940</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1network__broadcast__api_html"><div class="ttname"><a href="../../df/d95/classsteemit_1_1app_1_1network__broadcast__api.html">steemit::app::network_broadcast_api</a></div><div class="ttdoc">The network_broadcast_api class allows broadcasting of transactions. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/df0/api_8hpp_source.html#l00057">api.hpp:57</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_a3d5664fa0f199783c04369e314cbfb17"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a3d5664fa0f199783c04369e314cbfb17">steemit::app::detail::application_impl::reset_websocket_server</a></div><div class="ttdeci">void reset_websocket_server()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00151">application.cpp:151</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1application_html_a2393dc839e3ed526cb48d522b9d11478"><div class="ttname"><a href="../../de/d5e/classsteemit_1_1app_1_1application.html#a2393dc839e3ed526cb48d522b9d11478">steemit::app::application::enable_plugin</a></div><div class="ttdeci">void enable_plugin(const std::string &amp;name)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l01013">application.cpp:1013</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1application_html_a1b9f0eec92e8d0aaca235555e0c70f9d"><div class="ttname"><a href="../../de/d5e/classsteemit_1_1app_1_1application.html#a1b9f0eec92e8d0aaca235555e0c70f9d">steemit::app::application::initialize</a></div><div class="ttdeci">void initialize(const fc::path &amp;data_dir, const boost::program_options::variables_map &amp;options)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00923">application.cpp:923</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1application_html_a53844f3fea748dbfdd9e939d73ccdd86"><div class="ttname"><a href="../../de/d5e/classsteemit_1_1app_1_1application.html#a53844f3fea748dbfdd9e939d73ccdd86">steemit::app::application::chain_database</a></div><div class="ttdeci">std::shared_ptr&lt; chain::database &gt; chain_database() const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00954">application.cpp:954</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_a7901ae02cb6099d15269b504370b2894"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a7901ae02cb6099d15269b504370b2894">steemit::app::detail::application_impl::register_api_factory</a></div><div class="ttdeci">void register_api_factory(const string &amp;name, std::function&lt; fc::api_ptr(const api_context &amp;)&gt; factory)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00373">application.cpp:373</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html">steemit::app::detail::application_impl</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00069">application.cpp:69</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_a17798605ea8dab16459d1ae4fa1d8bb7"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a17798605ea8dab16459d1ae4fa1d8bb7">steemit::app::detail::application_impl::_shared_file_size</a></div><div class="ttdeci">uint64_t _shared_file_size</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00854">application.cpp:854</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_a953b9971e7e523b9a38ef3cd8524e167"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a953b9971e7e523b9a38ef3cd8524e167">steemit::app::detail::application_impl::get_blockchain_synopsis</a></div><div class="ttdeci">virtual std::vector&lt; item_hash_t &gt; get_blockchain_synopsis(const item_hash_t &amp;reference_point, uint32_t number_of_blocks_after_reference_point) override</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00643">application.cpp:643</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1application_html_a0633e1c5e906772f4e1762b18e7103da"><div class="ttname"><a href="../../de/d5e/classsteemit_1_1app_1_1application.html#a0633e1c5e906772f4e1762b18e7103da">steemit::app::application::get_api_access_info</a></div><div class="ttdeci">fc::optional&lt; api_access_info &gt; get_api_access_info(const string &amp;username) const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00967">application.cpp:967</a></div></div>
<div class="ttc" id="namespacesteemit_html"><div class="ttname"><a href="../../d9/d75/namespacesteemit.html">steemit</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d48/api_8cpp_source.html#l00036">api.cpp:36</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_ac0bff9d48659914c1b708fbb2a1edfe0"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ac0bff9d48659914c1b708fbb2a1edfe0">steemit::app::detail::application_impl::is_included_block</a></div><div class="ttdeci">bool is_included_block(const block_id_type &amp;block_id)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00496">application.cpp:496</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_a4682bee987068ffa378c289f06838431"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a4682bee987068ffa378c289f06838431">steemit::app::detail::application_impl::_api_factories_by_name</a></div><div class="ttdeci">flat_map&lt; std::string, std::function&lt; fc::api_ptr(const api_context &amp;)&gt; &gt; _api_factories_by_name</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00851">application.cpp:851</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_acf92fce4358db60e97d15b3503b6d135"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#acf92fce4358db60e97d15b3503b6d135">steemit::app::detail::application_impl::_lock_file</a></div><div class="ttdeci">fc::optional&lt; fc::temp_file &gt; _lock_file</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00071">application.cpp:71</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_a363b461d5abcdeb9d6a0dbedf38b26c8"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#a363b461d5abcdeb9d6a0dbedf38b26c8">steemit::app::detail::application_impl::sync_status</a></div><div class="ttdeci">virtual void sync_status(uint32_t item_type, uint32_t item_count) override</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00771">application.cpp:771</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1database__api_html"><div class="ttname"><a href="../../d4/dbd/classsteemit_1_1app_1_1database__api.html">steemit::app::database_api</a></div><div class="ttdoc">The database_api class implements the RPC API for the chain database. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d21/database__api_8hpp_source.html#l00108">database_api.hpp:108</a></div></div>
<div class="ttc" id="classsteemit_1_1app_1_1detail_1_1application__impl_html_ac5d350346743b9a99f37ff2787ac25d8"><div class="ttname"><a href="../../dd/d97/classsteemit_1_1app_1_1detail_1_1application__impl.html#ac5d350346743b9a99f37ff2787ac25d8">steemit::app::detail::application_impl::_running</a></div><div class="ttdeci">bool _running</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d7b/application_8cpp_source.html#l00856">application.cpp:856</a></div></div>
<div class="ttc" id="namespacesteemit_1_1chain_html_a41ef5a08e77cf4ee11fa9add4c8e0cdd"><div class="ttname"><a href="../../d8/d9b/namespacesteemit_1_1chain.html#a41ef5a08e77cf4ee11fa9add4c8e0cdd">steemit::chain::from_string</a></div><div class="ttdeci">void from_string(shared_string &amp;out, const string &amp;in)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd8/steem__object__types_8hpp_source.html#l00039">steem_object_types.hpp:39</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<hr class="footer"/>
<address class="footer">
    <small>
        Generated on Mon Apr 3 2017 22:07:56 for Golos by doxygen<a href="http://www.doxygen.org/index.html">
    </a> 1.8.13
    </small>
</address>
</body>
</html>
